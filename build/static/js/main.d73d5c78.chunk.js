(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{189:function(e,t,a){},208:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},293:function(e,t,a){},322:function(e,t,a){},498:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(33),r=a.n(s),c=(a(293),a(26)),l=a(27),o=a(29),d=a(28),h=a(43),u=a(40),b=a(501),j=a(79),g=a(516),f=a(517),p=(a(294),a(268)),m=a.n(p),x=(a(322),a(1)),O=b.a.Content,v=b.a.Sider,y=j.a.SubMenu,S=Object(u.f)((function(e){var t=e.location.pathname,a="task",n="task-task";if(t.length>1){var i=t.indexOf("/"),s=t.lastIndexOf("/");a=i===s?t.slice(i+1,t.length):t.slice(i+1,s),n="".concat(a,"-").concat(t.slice(s+1,t.length))}var r=document.querySelector('[flag="'+n+'"]');return r&&r.click(),Object(x.jsx)(m.a,{style:{overflow:"hidden",background:"#fff"},children:Object(x.jsxs)(b.a,{style:{height:"100%",paddingTop:"20px"},children:[Object(x.jsxs)(v,{width:"171",breakpoint:"lg",collapsedWidth:"0",style:{overflowY:"auto",height:"100%"},children:[Object(x.jsx)("div",{className:"logo",children:"\u63a8\u9001\u7cfb\u7edf"}),Object(x.jsx)("div",{style:{height:"calc(100%-50px)"},children:Object(x.jsxs)(j.a,{mode:"inline",forceSubMenuRender:!0,defaultOpenKeys:[a],defaultSelectedKeys:[n],children:[Object(x.jsxs)(y,{title:Object(x.jsxs)("span",{children:[Object(x.jsx)(g.a,{style:{fontSize:"15px",color:"#40404C"}}),Object(x.jsx)("span",{children:"\u63a8\u9001\u7ba1\u7406"})]}),children:[Object(x.jsx)(j.a.Item,{flag:"task-task",children:Object(x.jsx)(h.b,{to:"/task",children:"\u63a8\u9001\u4efb\u52a1"})},"task-task"),Object(x.jsx)(j.a.Item,{flag:"task-scene",children:Object(x.jsx)(h.b,{to:"/task/scene",children:"\u573a\u666f\u63a8\u9001"})},"task-scene"),Object(x.jsx)(j.a.Item,{flag:"task-history",children:Object(x.jsx)(h.b,{to:"/task/history",children:"\u5386\u53f2\u63a8\u9001"})},"task-history")]},"task"),Object(x.jsxs)(y,{title:Object(x.jsxs)("span",{children:[Object(x.jsx)(f.a,{style:{fontSize:"15px",color:"#40404C"}}),Object(x.jsx)("span",{children:"\u6d88\u606f\u6a21\u7248"})]}),flag:"my",children:[Object(x.jsx)(j.a.Item,{flag:"my-mailbox",children:Object(x.jsx)(h.b,{to:"/my/mailbox",children:"\u90ae\u4ef6"})},"my-mailbox"),Object(x.jsx)(j.a.Item,{flag:"my-SMS",children:Object(x.jsx)(h.b,{to:"/my/SMS",children:"\u77ed\u4fe1"})},"my-SMS"),Object(x.jsx)(j.a.Item,{flag:"my-dingdingRecord",children:Object(x.jsx)(h.b,{to:"/my/dingdingRecord",children:"\u9489\u9489\u5f85\u529e"})},"my-dingdingRecord"),Object(x.jsx)(j.a.Item,{flag:"my-dingdingRobot",children:Object(x.jsx)(h.b,{to:"/my/dingdingRobot",children:"\u9489\u9489\u673a\u5668\u4eba"})},"my-dingdingRobot"),Object(x.jsx)(j.a.Item,{flag:"my-dingdingGroup",children:Object(x.jsx)(h.b,{to:"/my/dingdingGroup",children:"\u9489\u9489\u7fa4\u901a\u77e5"})},"my-dingdingGroup"),Object(x.jsx)(j.a.Item,{flag:"my-dingdingNotice",children:Object(x.jsx)(h.b,{to:"/my/dingdingNotice",children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"})},"my-dingdingNotice")]},"my")]})})]}),Object(x.jsx)(b.a,{style:{height:"100%",padding:"0 10px"},children:Object(x.jsx)(O,{children:e.children})})]})})})),w=a(38),C=a(6),k=a(21),_=a(156),R=a.n(_),F=window.navigator.userAgent,D="ActiveXObject"in window;F.match(/Chrome/i),F.match(/(iPhone|iPad|iPod)/i)||F.match(/Android/i)||F.match(/Windows Phone/i)||F.match(/IEMobile/i);if(!1,"Microsoft Internet Explorer"===navigator.appName||D){var I=F.match(/MSIE (\d+[.\d]*)/);if(I){var V=I[1];V;var N=parseInt(V,10);8===N,9===N,10===N,11===N}}var T=D,z="/api/v1.0",M={getData:z+"/tpl",getUser:z+"/mail",getMailbox:z+"/tpl/mail",deleteMailbox:z+"/tpl/mail/",createMailModal:z+"/tpl/mail",editMail:z+"/tpl/mail",getSMS:z+"/tpl/sms",deleteSMS:z+"/tpl/sms/",createSMS:z+"/tpl/sms",editSMS:z+"/tpl/sms",getDingRecord:z+"/tpl/ding_record",deleteDingRecord:z+"/tpl/ding_record/",createDingRecord:z+"/tpl/ding_record",editDingRecord:z+"/tpl/ding_record",getDingRobot:z+"/tpl/ding_robot",deleteDingRobot:z+"/tpl/ding_robot/",createDingRobot:z+"/tpl/ding_robot",editDingRobot:z+"/tpl/ding_robot",getDingGroup:z+"/tpl/ding_group",deleteDingGroup:z+"/tpl/ding_group/",createDingGroup:z+"/tpl/ding_group",editDingGroup:z+"/tpl/ding_group",getDingNotice:z+"/tpl/ding_notice",deleteDingNotice:z+"/tpl/ding_notice/",createDingNotice:z+"/tpl/ding_notice",editDingNotice:z+"/tpl/ding_notice",getHistory:z+"/task/history",createHistory:z+"/task",deleteHistory:z+"/task/history/id",detailHistory:z+"/task/history/id",sendHistory:z+"/task/history/id",getTask:z+"/task",deleteTask:z+"/task/id",detailTask:z+"/task/id",editTask:z+"/task/id",sendTask:z+"/task/id",transferTask:z+"/task",getScene:z+"/scene",createScene:z+"/scene",deleteScene:z+"/scene/id",detailScene:z+"/scene/id",editScene:z+"/scene/id",transferScene:z+"/scene",Upload:z+"/upload"},q=R.a.create({headers:{"x-requested-with":"XMLHttpRequest"},timeout:6e5});q.defaults.headers.post["Content-Type"]="application/json",q.defaults.headers.put["Content-Type"]="application/json",q.interceptors.request.use((function(e){if(console.log(e),e.url===M.Upload)return e;if(e.url===M.addAppScanAsset)return e;if("post"===e.method||"put"===e.method)e.data=JSON.stringify(e.data);else if("get"===e.method&&T){var t=e.url.indexOf("?")>=0?"&":"?";e.url+=t+"_="+Date.now(),console.log("==========",e.url,t,Date.now())}return e}),(function(e){return console.log(e),Promise.reject(e)})),q.interceptors.response.use((function(e){return console.log(e,"response"),e.data}),(function(e){console.log(e.response),e.response=e.response||"",console.log("error"+e);var t={},a=e.response,n=a.status,i=a.statusText,s=a.data;return t=e.response?{code:n,data:s,msg:i}:{code:5e3,msg:"Network Error"},Promise.reject(t)}));var A=q,E=function(e,t,a){var n={};return t&&(n.params=t),a&&(n.headers=a),A.get(e,n)},L=function(e,t,a){var n={};return a&&(n.headers=a),A.post(e,t,n)},K=function(e,t,a){var n={};return a&&(n.headers=a),A.put(e,t,n)},B=function(e,t,a){var n={};return t&&(n.data=t),console.log(n.data),a&&(n.headers=a),A.delete(e,n)},U={Authorization:"8918c26c91364e9f9447c241cb46ff09","Content-Type":"application/json"},W=function(e){return E(M.getUser,e,U)},P=function(e){return E(M.getMailbox,e,U)},H=function(e){return L(M.createMailModal,e,U)},G=function(e){return B(M.deleteMailbox+e,{},U)},J=function(e,t){return K(M.editMail+"/"+e,t,U)},Q=function(e){return E(M.getSMS,e,U)},Y=function(e){return L(M.createSMS,e,U)},X=function(e){return B(M.deleteSMS+e,{},U)},Z=function(e,t){return K(M.editSMS+"/"+e,t,U)},$=function(e){return E(M.getDingRecord,e,U)},ee=function(e){return L(M.createDingRecord,e,U)},te=function(e){return B(M.deleteDingRecord+e,{},U)},ae=function(e,t){return K(M.editDingRecord+"/"+e,t,U)},ne=function(e){return E(M.getDingRobot,e,U)},ie=function(e){return L(M.createDingRobot,e,U)},se=function(e){return B(M.deleteDingRobot+e,{},U)},re=function(e,t){return K(M.editDingRobot+"/"+e,t,U)},ce=function(e){return E(M.getDingGroup,e,U)},le=function(e){return L(M.createDingGroup,e,U)},oe=function(e){return B(M.deleteDingGroup+e,{},U)},de=function(e,t){return K(M.editDingGroup+"/"+e,t,U)},he=function(e){return E(M.getDingNotice,e,U)},ue=function(e){return L(M.createDingNotice,e,U)},be=function(e){return B(M.deleteDingNotice+e,{},U)},je=function(e,t){return K(M.editDingNotice+"/"+e,t,U)},ge=function(e){return E(M.getHistory,e,U)},fe=function(e){return L(M.createHistory,e,U)},pe=function(e){return B(M.deleteHistory+"/"+e,{},U)},me=function(e){return E(M.detailHistory+"/"+e,{},U)},xe=function(e){return L(M.sendHistory+"/"+e,{},U)},Oe=function(e){return E(M.getTask,e,U)},ve=function(e){return B(M.deleteTask+"/"+e,{},U)},ye=function(e){return E(M.detailTask+"/"+e,{},U)},Se=function(e,t){return K(M.editTask+"/"+e,t,U)},we=function(e){return L(M.sendTask+"/"+e,{},U)},Ce=function(e,t){return L(M.transferTask+"/"+e+"/transfer",t,U)},ke=function(e){return E(M.getScene,e,U)},_e=function(e){return L(M.createScene,e,U)},Re=function(e,t){return B(M.deleteScene+"/"+e,t,U)},Fe=function(e){return E(M.detailScene+"/"+e,{},U)},De=function(e,t){return K(M.editScene+"/"+e,t,U)},Ie=function(e,t){return L(M.transferScene+"/"+e+"/transfer",t,U)},Ve=function(e){return L(M.Upload,e,{"Content-Type":"multipart/form-data"})},Ne=a(35),Te=a.n(Ne),ze=a(508),Me=a(277),qe=a(511),Ae=a(49),Ee=a(77),Le=a(280),Ke=a(506),Be=a(504),Ue=a(505),We=a(507),Pe=a(512),He=a(185),Ge=a(518),Je=a(146),Qe=a(521),Ye=a(519),Xe=a(286),Ze=a(520),$e=(a(189),a(190),a(78)),et=a.n($e),tt=a(502),at=a(503),nt=(Me.a.TextArea,function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={path:"",fileList:[]},e.editFormRef=i.a.createRef(),e.uploadHandler=function(t){if(!t.file)return!1;console.log(t.file);var a=new FormData;a.append("file",t.file),console.log(a),Ve(a).then((function(t){if(0===t.code){var a=e.state.initValue.toHTML();a+="<image src=http://192.168.41.49".concat(t.data.download," />"),console.log(a),e.setState({initValue:et.a.createEditorState(a)})}}))},e.controls=["bold","italic","underline","separator","text-color","strike-through","text-align","code"],e.extendControls=[{key:"antd-uploader",type:"component",component:Object(x.jsx)(Ke.a,{accept:"image/*",showUploadList:!1,customRequest:e.uploadHandler,children:Object(x.jsx)("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247",children:Object(x.jsx)(Ge.a,{style:{fontSize:"13px",color:"#535355"}})})})}],e.onEditorChange=function(t){var a=t.toHTML().match(/\{{(.+?)\}}/g),n=[];a&&(n=a.map((function(e){return e.length?e.substring(2,e.length-2):null})));var i=e.editFormRef.current.getFieldValue("variable")||[];if(n){var s=i.map((function(e){return e.name}));n=Array.from(new Set(n));for(var r=0;r<n.length;r++)i.push({name:n[r]});for(var c=0;c<s.length;c++){for(var l=-1,o=0;o<i.length;o++)s[c]===i[o].name&&(l=o);-1!==l&&i.splice(l,1)}e.editFormRef.current.setFieldsValue({variable:i})}e.setState({editorValue:t.toHTML()})},e.handleCancel=function(){var t=e.props.onCancel;e.state.file={},e.editFormRef.current.resetFields(),t()},e.handleOk=function(){var t=e.props,a=(t.item,t.onOk),n=e.props.currentRowData.id;e.editFormRef.current.validateFields().then((function(t){var i=Object(C.a)(Object(C.a)({},t),{},{editorValue:e.state.editorValue,path:e.state.path,variable:e.editFormRef.current.getFieldValue("variable")});console.log(i),a(n,i)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.currentRowData!==e.currentRowData&&this.setState({path:e.currentRowData.path,fileList:e.currentRowData.path?[{name:"\u539f\u6709\u9644\u4ef6",status:"done",url:e.currentRowData.path}]:[],editorValue:e.currentRowData.content.content})}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.currentRowData,i=t.isCopy,s=n.title,r=n.variable,c=(n.path,{customRequest:function(t){if(console.log(t.file),!t.file)return!1;var a=new FormData;a.append("file",t.file),Ve(a).then((function(t){0===t.code&&e.setState({path:t.data.download})}))},maxCount:1,onRemove:function(t){return e.setState({fileList:[]}),!0},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Le.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Le.b.error("".concat(e.file.name," file upload failed."))},beforeUpload:function(t){console.log("beforeUpload:",t),e.state.fileList.push(t),e.setState({fileList:[t]})}});return Object(x.jsxs)(ze.a,{title:i?"\u590d\u5236":"\u7f16\u8f91",visible:a,onCancel:this.handleCancel,onOk:this.handleOk,okText:i?"\u521b\u5efa":"\u66f4\u65b0",cancelText:"\u53d6\u6d88",maskStyle:{background:"rgba(217,218,217,0.5)"},width:"50%",destroyOnClose:!0,children:[Object(x.jsxs)(We.a,{className:"addModel",name:"basic",labelCol:{span:4},ref:this.editFormRef,children:[Object(x.jsx)(We.a.Item,{label:"\u77ed\u4fe1\u6807\u9898",name:"title",rules:[{required:!0}],initialValue:s,children:Object(x.jsx)(Me.a,{style:{width:463,height:40},placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"})}),Object(x.jsx)(We.a.Item,{style:{marginLeft:100},children:Object(x.jsxs)(Ke.a,Object(C.a)(Object(C.a)({fileList:this.state.fileList},c),{},{children:[Object(x.jsx)(Ye.a,{style:{fontSize:"13px",color:"#000000"}}),"\u6dfb\u52a0\u9644\u4ef6\uff5c",Object(x.jsx)(Xe.a,{})]}))}),Object(x.jsx)(We.a.Item,{label:"\u90ae\u4ef6\u6b63\u6587",rules:[{required:!0}],children:Object(x.jsx)(et.a,{defaultValue:et.a.createEditorState(Object.hasOwnProperty.call(n,"content")?n.content.content:null),controls:this.controls,extendControls:this.extendControls,onChange:this.onEditorChange,placeholder:"\u8bf7\u8f93\u5165\u90ae\u4ef6\u6b63\u6587\uff0c\u652f\u6301Html\u8bed\u6cd5",className:"html-BraftEditor"})}),Object(x.jsx)(We.a.List,{name:"variable",initialValue:r,children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]}),Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",style:!0,placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})})]})]})}}]),a}(n.Component)),it=ze.a.confirm,st=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0},current:1,pageSize:10,visible:!1,deleteVisible:!1,titleValue:"",initValue:et.a.createEditorState(null),fileList:[],file:null,path:"",currentRowData:"",isCopy:!1,addRes:[],filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.uploadProps={customRequest:function(t){if(!t.file)return!1;var a=new FormData;a.append("file",t.file),Ve(a).then((function(a){0===a.code&&e.setState({path:a.data.download,fileList:[t.file]})}))},onRemove:function(t){return e.setState({fileList:[]}),!0},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Le.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Le.b.error("".concat(e.file.name," file upload failed."))},beforeUpload:function(t){console.log("beforeUpload:",t),e.state.fileList.push(t),e.setState({fileList:[t]})},maxCount:1},e.onEditorChange=function(t){var a=t.toHTML().match(/\{{(.+?)\}}/g),n=[];a&&(n=a.map((function(e){return e.length?e.substring(2,e.length-2):null})));var i=e.formRef.current.getFieldValue("variable")||[];if(n){var s=i.map((function(e){return e.name}));n=Array.from(new Set(n));for(var r=0;r<n.length;r++)i.push({name:n[r]});for(var c=0;c<s.length;c++){for(var l=-1,o=0;o<i.length;o++)s[c]===i[o].name&&(l=o);-1!==l&&i.splice(l,1)}e.formRef.current.setFieldsValue({variable:i})}e.setState({initValue:t})},e.uploadHandler=function(t){if(!t.file)return!1;console.log(t.file);var a=new FormData;a.append("file",t.file),console.log(a),Ve(a).then((function(t){if(0===t.code){var a=e.state.initValue.toHTML();a+="<image src=".concat(t.data.download," />"),console.log(a),e.setState({initValue:et.a.createEditorState(a)})}}))},e.formRef=i.a.createRef(),e.controls=["bold","italic","underline","separator","text-color","strike-through","text-align","code"],e.extendControls=[{key:"antd-uploader",type:"component",component:Object(x.jsx)(Ke.a,{accept:"image/*",showUploadList:!1,customRequest:e.uploadHandler,children:Object(x.jsx)("button",{type:"button",className:"control-item button upload-button","data-title":"\u63d2\u5165\u56fe\u7247",children:Object(x.jsx)(Ge.a,{style:{fontSize:"13px",color:"#535355"}})})})}],e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){console.log(e.formRef.current.getFieldValue("variable")),e.formRef.current.validateFields().then((function(t){console.log(e.state.path),H(Object(C.a)(Object(C.a)({},t),{},{content:{content:e.state.initValue.toHTML(),sub_type:"html",subject:e.state.titleValue},title:e.state.titleValue,content_format:"html",path:e.state.path,variable:e.formRef.current.getFieldValue("variable")})),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);it({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){G(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0}),console.log(e.state.currentRowData)},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){console.log("okk",a),J(t,{content:{content:a.editorValue,sub_type:"html",subject:a.title},title:a.title,content_format:"html",path:a.path,variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){console.log("okk",a),H({content:{content:a.editorValue,sub_type:"html",subject:a.title},title:a.title,content_format:"html",path:a.path,variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;P({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}console.log(e.state.searchArr)}))}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.initValue,a=e.titleValue;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{})," \u90ae\u4ef6\u6a21\u677f"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u6a21\u7248",width:"645px",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",bodyStyle:{margin:"10px 10px"},destroyOnClose:!0,children:Object(x.jsxs)(We.a,{name:"basic",onFinish:this.onFinish,ref:this.formRef,children:[Object(x.jsx)(We.a.Item,{label:"\u90ae\u4ef6\u6807\u9898",name:"subject",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{value:a,onChange:this.handleTitleChange.bind(this),placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0",style:{width:"461px",height:"40px",borderRadius:" 5px "}})}),Object(x.jsx)(We.a.Item,{style:{marginLeft:100},children:Object(x.jsxs)(Ke.a,Object(C.a)(Object(C.a)({fileList:this.state.fileList},this.uploadProps),{},{children:[Object(x.jsx)(Ye.a,{style:{fontSize:"13px",color:"#000000"}}),"\u6dfb\u52a0\u9644\u4ef6\uff5c",Object(x.jsx)(Xe.a,{})]}))}),Object(x.jsxs)(We.a.Item,{label:"\u90ae\u4ef6\u6b63\u6587",name:"info",rules:[{required:!0,validator:function(e,a,n){t?n():n("\u8bf7\u8f93\u5165\u90ae\u4ef6\u6b63\u6587")}}],children:[Object(x.jsx)(et.a,{value:t,controls:this.controls,extendControls:this.extendControls,onChange:this.onEditorChange,placeholder:"\u8bf7\u8f93\u5165\u90ae\u4ef6\u6b63\u6587\uff0c\u652f\u6301Html\u8bed\u6cd5",className:"html-BraftEditor"}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})}),Object(x.jsx)(nt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy})]})}},{key:"getRefresh",value:function(){var e=this,t=this;P(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"},initValue:"",filter_fields:a.data.filter_fields}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),rt=a(145),ct=Me.a.TextArea,lt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={},e.editFormRef=i.a.createRef(),e.onEditorChange=function(t){var a=t.target.value.match(/\{{(.+?)\}}/g),n=[];a&&(n=a.map((function(e){return e.length?e.substring(2,e.length-2):null})));var i=e.editFormRef.current.getFieldValue("variable")||[];if(n){var s=i.map((function(e){return e.name}));n=Array.from(new Set(n));for(var r=0;r<n.length;r++)i.push({name:n[r]});for(var c=0;c<s.length;c++){for(var l=-1,o=0;o<i.length;o++)s[c]===i[o].name&&(l=o);-1!==l&&i.splice(l,1)}e.editFormRef.current.setFieldsValue({variable:i})}},e.handleCancel=function(){var t=e.props.onCancel;e.editFormRef.current.resetFields(),t()},e.handleOk=function(){var t=e.props,a=(t.item,t.onOk),n=e.props.currentRowData.id;e.editFormRef.current.validateFields().then((function(e){var t=Object(C.a)({},e);a(n,t)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.currentRowData,n=e.isCopy,i=e.isSMS,s=(rt.a.Option,Object(C.a)({},a));return s=Object(C.a)(Object(C.a)({},s),{},{content:Object.hasOwnProperty.call(a,"content")?a.content.content:""}),Object(x.jsxs)(ze.a,{title:n?"\u590d\u5236":"\u7f16\u8f91",visible:t,onCancel:this.handleCancel,onOk:this.handleOk,okText:n?"\u521b\u5efa":"\u66f4\u65b0",cancelText:"\u53d6\u6d88",maskStyle:{background:"rgba(217,218,217,0.5)"},width:"50%",destroyOnClose:!0,children:[Object(x.jsxs)(We.a,{className:"addModel",name:"basic",labelCol:{span:4},initialValues:s,ref:this.editFormRef,children:[Object(x.jsx)(We.a.Item,{label:i?"\u77ed\u4fe1\u6807\u9898":"\u5f85\u529e\u6807\u9898",name:"title",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{style:{width:463,height:40},placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"})}),Object(x.jsx)(We.a.Item,{label:i?"\u77ed\u4fe1\u6b63\u6587":"\u5f85\u529e\u4e8b\u9879",name:"content",rules:[{required:!0}],children:Object(x.jsx)(ct,{placeholder:i?"\u8bf7\u8f93\u5165\u77ed\u4fe1\u6b63\u6587":"\u8bf7\u8f93\u5165\u5f85\u529e\u4e8b\u9879",onChange:this.onEditorChange,style:{width:463,height:250}})}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]}),Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",style:!0,placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})})]})]})}}]),a}(n.Component),ot=ze.a.confirm,dt=Me.a.TextArea,ht=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0},visible:!1,deleteVisible:!1,titleValue:"",initValue:"",fileList:[],file:null,path:"",editVisible:!1,currentRowData:"",isCopy:!1,filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.onEditorChange=function(t){console.log(e.formRef.current.getFieldValue());var a=t.target.value.match(/\{{(.+?)\}}/g),n=[];a&&(n=a.map((function(e){return e.length?e.substring(2,e.length-2):null})));var i=e.formRef.current.getFieldValue("variable")||[];if(n){var s=i.map((function(e){return e.name}));n=Array.from(new Set(n));for(var r=0;r<n.length;r++)i.push({name:n[r]});for(var c=0;c<s.length;c++){for(var l=-1,o=0;o<i.length;o++)s[c]===i[o].name&&(l=o);-1!==l&&i.splice(l,1)}e.formRef.current.setFieldsValue({variable:i})}e.setState({initValue:t.target.value})},e.formRef=i.a.createRef(),e.showModal=function(){e.setState({visible:!0,myKey:Math.random()})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){console.log(e.state.path),Y(Object(C.a)(Object(C.a)({},t),{},{content:{content:e.state.initValue},title:e.state.titleValue,content_format:"text",variable:e.formRef.current.getFieldValue("variable")})),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);ot({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){X(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0}),console.log(e.state.currentRowData)},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){Z(t,{content:{content:a.content},title:a.title,content_format:"text",variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){console.log("okk",a),Y({content:{content:a.content},title:a.title,content_format:"text",variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;Q({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.initValue,a=e.titleValue,n=e.myKey;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{})," \u77ed\u4fe1\u6a21\u677f"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u6a21\u7248",width:"645px",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,bodyStyle:{margin:"10px 10px"},maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{label:"\u77ed\u4fe1\u6807\u9898",name:"title",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{style:{width:"461px",height:"40px",borderRadius:" 5px "},value:a,onChange:this.handleTitleChange.bind(this),placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"})}),Object(x.jsxs)(We.a.Item,{label:"\u77ed\u4fe1\u6b63\u6587",name:"content",rules:[{required:!0,validator:function(e,a,n){t?n():n("\u8bf7\u8f93\u5165\u90ae\u4ef6\u6b63\u6587")}}],children:[Object(x.jsx)(dt,{value:t,onChange:this.onEditorChange,placeholder:"\u8bf7\u8f93\u5165\u77ed\u4fe1\u6b63\u6587",className:"sms-text",rows:"10",cols:"60"}),Object(x.jsx)("br",{}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})},n),Object(x.jsx)(lt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy,isSMS:!0})]})}},{key:"getRefresh",value:function(){var e=this,t=this;Q(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"},initValue:""}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),ut=ze.a.confirm,bt=Me.a.TextArea,jt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0},visible:!1,deleteVisible:!1,titleValue:"",initValue:"",fileList:[],file:null,path:"",editVisible:!1,currentRowData:"",isCopy:!1,filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.onEditorChange=function(t){console.log(e.formRef.current.getFieldValue());var a=t.target.value.match(/\{{(.+?)\}}/g),n=[];a&&(n=a.map((function(e){return e.length?e.substring(2,e.length-2):null})));var i=e.formRef.current.getFieldValue("variable")||[];if(n){var s=i.map((function(e){return e.name}));n=Array.from(new Set(n));for(var r=0;r<n.length;r++)i.push({name:n[r]});for(var c=0;c<s.length;c++){for(var l=-1,o=0;o<i.length;o++)s[c]===i[o].name&&(l=o);-1!==l&&i.splice(l,1)}e.formRef.current.setFieldsValue({variable:i})}e.setState({initValue:t.target.value})},e.formRef=i.a.createRef(),e.showModal=function(){e.setState({visible:!0,myKey:Math.random()})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){console.log(t),ee(Object(C.a)(Object(C.a)({},t),{},{content:{content:e.state.initValue},content_format:"text"})),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);ut({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){te(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0}),console.log(e.state.currentRowData)},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){ae(t,{content:{content:a.content},title:a.title,content_format:"text",variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){console.log("okk",a),ee({content:{content:a.content},title:a.title,content_format:"text",variable:a.variable}).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;$({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.initValue,a=e.titleValue,n=e.myKey;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{})," \u5f85\u529e\u6a21\u677f"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u6a21\u7248",width:"645px",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,bodyStyle:{margin:"10px 10px"},maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{label:"\u5f85\u529e\u6807\u9898",name:"title",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{style:{width:"461px",height:"40px",borderRadius:" 5px "},value:a,onChange:this.handleTitleChange.bind(this),placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"})}),Object(x.jsxs)(We.a.Item,{label:"\u5f85\u529e\u4e8b\u9879",name:"content",rules:[{required:!0,validator:function(e,a,n){t?n():n("\u8bf7\u8f93\u5165\u90ae\u4ef6\u6b63\u6587")}}],children:[Object(x.jsx)(bt,{value:t,onChange:this.onEditorChange,placeholder:"\u8bf7\u8f93\u5165\u5f85\u529e\u4e8b\u9879",className:"sms-text",rows:"10",cols:"60"}),Object(x.jsx)("br",{}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})},n),Object(x.jsx)(lt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy,isSMS:!1})]})}},{key:"getRefresh",value:function(){var e=this,t=this;$(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"},initValue:""}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),gt=a(175),ft=a(514),pt=(a(208),a(81),a(82),a(44)),mt=Me.a.TextArea,xt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={MarkdownContent:""},e.editFormRef=i.a.createRef(),e.editorRef=i.a.createRef(),e.onMarkdownChange=function(t,a){var n=e.editorRef.current.getInstance().getMarkdown().match(/\{{(.+?)\}}/g),i=[];n&&(i=n.map((function(e){return e.length?e.substring(2,e.length-2):null})));var s=e.editFormRef.current.getFieldValue("variable")||[];if(i){var r=s.map((function(e){return e.name}));i=Array.from(new Set(i));for(var c=0;c<i.length;c++)s.push({name:i[c]});for(var l=0;l<r.length;l++){for(var o=-1,d=0;d<s.length;d++)r[l]===s[d].name&&(o=d);-1!==o&&s.splice(o,1)}e.editFormRef.current.setFieldsValue({variable:s})}e.setState({MarkdownContent:e.editorRef.current.getInstance().getMarkdown()})},e.handleCancel=function(){var t=e.props.onCancel;e.editFormRef.current.resetFields(),t()},e.handleOk=function(){var t=e.props,a=(t.item,t.onOk),n=(t.t,e.props.currentRowData),i=n.id,s=n.content_format;e.editFormRef.current.validateFields().then((function(t){console.log(t);var n=Object(C.a)(Object(C.a)({},t),{},{MarkdownContent:e.state.MarkdownContent,content_format:s});a(i,n)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"onTextareaChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.editFormRef.current.getFieldValue("variable")||[];if(a){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));for(var s=0;s<a.length;s++)n.push({name:a[s]});for(var r=0;r<i.length;r++){for(var c=-1,l=0;l<n.length;l++)i[r]===n[l].name&&(c=l);-1!==c&&n.splice(c,1)}this.editFormRef.current.setFieldsValue({variable:n})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.visible,n=t.currentRowData,i=t.isCopy,s=(rt.a.Option,n.content_format),r=Object.hasOwnProperty.call(n,"content")?n.content.text:"",c=Object.hasOwnProperty.call(n,"content")?n.content.btns:"",l=Object(C.a)({},n);return l=Object(C.a)(Object(C.a)({},l),{},{content:Object.hasOwnProperty.call(n,"content")?n.content.content:""}),Object(x.jsxs)(ze.a,{title:i?"\u590d\u5236":"\u7f16\u8f91",visible:a,onCancel:this.handleCancel,onOk:this.handleOk,okText:i?"\u521b\u5efa":"\u66f4\u65b0",cancelText:"\u53d6\u6d88",maskStyle:{background:"rgba(217,218,217,0.5)"},width:"640px",destroyOnClose:!0,children:[Object(x.jsxs)(We.a,{className:"addModel",name:"basic",labelCol:{span:4},initialValues:l,ref:this.editFormRef,children:[Object(x.jsx)(We.a.Item,{children:Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{span:4}),Object(x.jsx)(at.a,{span:20,className:"radio-content",children:Object(x.jsxs)(gt.a.Group,{disabled:!0,defaultValue:s,children:[Object(x.jsx)(gt.a,{value:"text",children:"\u6587\u672c"}),Object(x.jsx)(gt.a,{value:"markdown",children:"Markdown"}),Object(x.jsx)(gt.a,{value:"actionCard",children:"ActionCard"})]})})]})}),Object(x.jsx)(We.a.Item,{label:"\u77ed\u4fe1\u6807\u9898",name:"title",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{style:{width:463,height:40},placeholder:"\u8bf7\u8f93\u5165\u6a21\u677f\u540d\u79f0"})}),"text"==s&&Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"content",rules:[{required:!0}],children:Object(x.jsx)(mt,{placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",onChange:this.onTextareaChange.bind(this),style:{width:463,height:250}})}),"markdown"==s&&Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"text",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",initialValue:r,onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}})}),"actionCard"==s&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.List,{name:"users",initialValue:c,children:function(e,t){var a=t.add,n=t.remove;return Object(x.jsxs)(x.Fragment,{children:[e.map((function(e){var t=e.key,a=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]);return Object(x.jsxs)(qe.b,{style:{display:"flex"},align:"baseline",children:[Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad addAD-Input-Dad-First"},s),{},{name:[a,"title"],fieldKey:[i,"title"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6309\u94ae\u540d\u79f0"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u6309\u94ae\u540d\u79f0"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad"},s),{},{name:[a,"actionURL"],fieldKey:[i,"actionURL"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5url"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u94fe\u63a5url"})})),Object(x.jsx)(Ze.a,{onClick:function(){return n(a)}})]},t)})),Object(x.jsx)(We.a.Item,{children:Object(x.jsx)(Ae.a,{type:"dashed",className:"addAD-Button",onClick:function(){return a()},block:!0,icon:Object(x.jsx)(ft.a,{}),children:"\u6dfb\u52a0\u8df3\u8f6c"})})]})}}),Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"text",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",initialValue:r,onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]}),Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",style:!0,placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})})]})]})}}]),a}(n.Component),Ot=ze.a.confirm,vt=Me.a.TextArea,yt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null},current:"",visible:!1,deleteVisible:!1,flowState:1,textareaValue:"",MarkdownContent:"",titleValue:"",fileList:[],file:null,btnsArray:[],btns:{title:"",actionURL:""},editVisible:!1,currentRowData:"",isCopy:!1,filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e,t){return"text"==t.content_format?Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})}):Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.text,children:e.text})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.formRef=i.a.createRef(),e.controls=["bold","italic","underline","separator","text-color","strike-through","text-align","code"],e.radioChange=function(t){console.log(t),e.setState({flowState:t})},e.uploadProps={action:"http://192.168.41.49/api/v1.0/upload",onRemove:function(t){e.setState((function(a){var n=a.fileList,i=n.indexOf(t);return n.splice(i,1),e.setState({fileList:e.newFileList}),!1}))},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Le.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Le.b.error("".concat(e.file.name," file upload failed."))},beforeUpload:function(t){console.log("beforeUpload:",t),e.state.fileList.push(t),e.setState({file:e.state.file})},fileList:e.state.fileList},e.editorRef=i.a.createRef(),e.onMarkdownChange=function(t,a){var n=e.editorRef.current.getInstance().getMarkdown().match(/\{{(.+?)\}}/g),i=[];n&&(i=n.map((function(e){return e.length?e.substring(2,e.length-2):null})));var s=e.formRef.current.getFieldValue("variable")||[];if(0!=i.length){var r=s.map((function(e){return e.name}));i=Array.from(new Set(i));e:for(var c=0;c<i.length;c++){for(var l=0;l<r.length;l++)if(r[l]==i[c])continue e;s.push({name:i[c]})}e.formRef.current.setFieldsValue({variable:s})}e.setState({MarkdownContent:e.editorRef.current.getInstance().getMarkdown()})},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){var a={variable:e.formRef.current.getFieldValue("variable")};a.content_format=["text","markdown","actionCard"][parseInt(e.state.flowState)-1],1===e.state.flowState?a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{content:e.state.textareaValue}}):2===e.state.flowState?(console.log(e.state.MarkdownContent),a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{text:e.state.MarkdownContent,title:e.state.titleValue},path:null})):3===e.state.flowState&&(a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{title:e.state.titleValue,text:e.state.MarkdownContent,btnOrientation:"0",btns:e.formRef.current.getFieldValue("users")},path:null,style:"ding_robot"})),ie(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);Ot({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){se(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0})},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text",style:"ding_robot"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown",style:"ding_robot"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard",style:"ding_robot"})}re(t,n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text",style:"ding_robot"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown",style:"ding_robot"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard",style:"ding_robot"})}ie(n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;ne({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"handleTextareaChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(a){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));for(var s=0;s<a.length;s++)n.push({name:a[s]});for(var r=0;r<i.length;r++){for(var c=-1,l=0;l<n.length;l++)i[r]===n[l].name&&(c=l);-1!==c&&n.splice(c,1)}this.formRef.current.setFieldsValue({variable:n})}this.setState({textareaValue:e.target.value})}},{key:"onTitleChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current.setFieldsValue({variable:n})}}},{key:"onURLChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current.setFieldsValue({variable:n})}}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"render",value:function(){var e=this,t=this.state,a=t.textareaValue,n=t.titleValue;t.initValue;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{})," \u9489\u9489\u673a\u5668\u4eba"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u6a21\u7248",width:"645px",bodyStyle:{margin:"10px 10px"},visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{children:Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{span:4}),Object(x.jsx)(at.a,{span:20,className:"radio-content",children:Object(x.jsxs)(gt.a.Group,{defaultValue:1,onChange:function(t){return e.radioChange(t.target.value)},children:[Object(x.jsx)(gt.a,{value:1,children:"\u6587\u672c"}),Object(x.jsx)(gt.a,{value:2,children:"Markdown"}),Object(x.jsx)(gt.a,{value:3,children:"ActionCard"})]})})]})}),Object(x.jsx)(We.a.Item,{label:"\u6807\u9898\u540d\u79f0",name:"title",rules:[{required:!0,validator:function(e,t,a){n?a():a("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{placeholder:"\u9ed8\u8ba4\u4e3a\u6a21\u677f\u540d\u79f0",className:"input-pos",value:n,onChange:this.handleTitleChange.bind(this),style:{width:"461px",height:"40px",borderRadius:" 5px "}})}),"1"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info1",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(vt,{value:a,rows:4,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",onChange:this.handleTextareaChange.bind(this),style:{width:"461px",height:"260px",borderRadius:" 5px "}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("div",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"2"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info2",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"3"==this.state.flowState&&Object(x.jsx)(We.a.List,{name:"users",children:function(t,a){var n=a.add,i=a.remove;return Object(x.jsxs)(x.Fragment,{children:[t.map((function(t){var a=t.key,n=t.name,s=t.fieldKey,r=Object(w.a)(t,["key","name","fieldKey"]);return Object(x.jsxs)(qe.b,{style:{display:"flex"},align:"baseline",children:[Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad addAD-Input-Dad-First"},r),{},{name:[n,"title"],fieldKey:[s,"title"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6309\u94ae\u540d\u79f0"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u6309\u94ae\u540d\u79f0",onChange:e.onTitleChange.bind(e)})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad"},r),{},{name:[n,"actionURL"],fieldKey:[s,"actionURL"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5url"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u94fe\u63a5url",onChange:e.onURLChange.bind(e)})})),Object(x.jsx)(Ze.a,{onClick:function(){return i(n)}})]},a)})),Object(x.jsx)(We.a.Item,{children:Object(x.jsx)(Ae.a,{type:"dashed",className:"addAD-Button",onClick:function(){return n()},block:!0,icon:Object(x.jsx)(ft.a,{}),children:"\u6dfb\u52a0\u8df3\u8f6c"})})]})}}),"3"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info3",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})}),Object(x.jsx)(xt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy})]})}},{key:"getRefresh",value:function(){var e=this,t=this;ne(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),St=ze.a.confirm,wt=Me.a.TextArea,Ct=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null},current:"",visible:!1,deleteVisible:!1,flowState:1,textareaValue:"",MarkdownContent:"",titleValue:"",fileList:[],file:null,btnsArray:[],btns:{title:"",actionURL:""},editVisible:!1,currentRowData:"",isCopy:!1,filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e,t){return"text"==t.content_format?Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})}):Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.text,children:e.text})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.onEditorChange=function(t){e.setState({initValue:t})},e.formRef=i.a.createRef(),e.controls=["bold","italic","underline","separator","text-color","strike-through","text-align","code"],e.radioChange=function(t){console.log(t),e.setState({flowState:t})},e.uploadProps={action:"http://192.168.41.49/api/v1.0/upload",onRemove:function(t){e.setState((function(a){var n=a.fileList,i=n.indexOf(t);return n.splice(i,1),e.setState({fileList:e.newFileList}),!1}))},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Le.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Le.b.error("".concat(e.file.name," file upload failed."))},beforeUpload:function(t){console.log("beforeUpload:",t),e.state.fileList.push(t),e.setState({file:e.state.file})},fileList:e.state.fileList},e.editorRef=i.a.createRef(),e.onMarkdownChange=function(t,a){var n=e.editorRef.current.getInstance().getMarkdown().match(/\{{(.+?)\}}/g),i=[];n&&(i=n.map((function(e){return e.length?e.substring(2,e.length-2):null})));var s=e.formRef.current.getFieldValue("variable")||[];if(0!=i.length){var r=s.map((function(e){return e.name}));i=Array.from(new Set(i));e:for(var c=0;c<i.length;c++){for(var l=0;l<r.length;l++)if(r[l]==i[c])continue e;s.push({name:i[c]})}e.formRef.current.setFieldsValue({variable:s})}e.setState({MarkdownContent:e.editorRef.current.getInstance().getMarkdown()})},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){var a={variable:e.formRef.current.getFieldValue("variable")};a.content_format=["text","markdown","actionCard"][parseInt(e.state.flowState)-1],1===e.state.flowState?a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{content:e.state.textareaValue}}):2===e.state.flowState?(console.log(e.state.MarkdownContent),a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{text:e.state.MarkdownContent,title:e.state.titleValue},path:null})):3===e.state.flowState&&(a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{title:e.state.titleValue,text:e.state.MarkdownContent,btnOrientation:"0",btns:e.formRef.current.getFieldValue("users")},path:null})),le(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);St({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){oe(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0})},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard",style:"ding_robot"})}de(t,n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard",style:"ding_robot"})}le(n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;ce({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"handleTextareaChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(a){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));for(var s=0;s<a.length;s++)n.push({name:a[s]});for(var r=0;r<i.length;r++){for(var c=-1,l=0;l<n.length;l++)i[r]===n[l].name&&(c=l);-1!==c&&n.splice(c,1)}this.formRef.current.setFieldsValue({variable:n})}this.setState({textareaValue:e.target.value})}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"onTitleChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current.setFieldsValue({variable:n})}}},{key:"onURLChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current.setFieldsValue({variable:n})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.textareaValue,n=t.titleValue;t.initValue;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{}),"  \u9489\u9489\u7fa4\u901a\u77e5"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{width:"645px",bodyStyle:{margin:"10px 10px"},title:"\u65b0\u5efa\u6a21\u7248",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{children:Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{span:4}),Object(x.jsx)(at.a,{span:20,className:"radio-content",children:Object(x.jsxs)(gt.a.Group,{defaultValue:1,onChange:function(t){return e.radioChange(t.target.value)},children:[Object(x.jsx)(gt.a,{value:1,children:"\u6587\u672c"}),Object(x.jsx)(gt.a,{value:2,children:"Markdown"}),Object(x.jsx)(gt.a,{value:3,children:"ActionCard"})]})})]})}),Object(x.jsx)(We.a.Item,{label:"\u6807\u9898\u540d\u79f0",name:"title",rules:[{required:!0,validator:function(e,t,a){n?a():a("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{placeholder:"\u9ed8\u8ba4\u4e3a\u6a21\u677f\u540d\u79f0",value:n,onChange:this.handleTitleChange.bind(this),style:{width:"461px",height:"40px",borderRadius:" 5px "}})}),"1"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info1",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(wt,{value:a,rows:4,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",onChange:this.handleTextareaChange.bind(this),style:{width:"461px",height:"260px",borderRadius:" 5px "}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("div",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"2"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info2",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"3"==this.state.flowState&&Object(x.jsx)(We.a.List,{name:"users",children:function(t,a){var n=a.add,i=a.remove;return Object(x.jsxs)(x.Fragment,{children:[t.map((function(t){var a=t.key,n=t.name,s=t.fieldKey,r=Object(w.a)(t,["key","name","fieldKey"]);return Object(x.jsxs)(qe.b,{style:{display:"flex"},align:"baseline",children:[Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad addAD-Input-Dad-First"},r),{},{name:[n,"title"],fieldKey:[s,"title"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6309\u94ae\u540d\u79f0"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u6309\u94ae\u540d\u79f0",onChange:e.onTitleChange.bind(e)})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad"},r),{},{name:[n,"actionURL"],fieldKey:[s,"actionURL"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5url"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u94fe\u63a5url",onChange:e.onURLChange.bind(e)})})),Object(x.jsx)(Ze.a,{onClick:function(){return i(n)}})]},a)})),Object(x.jsx)(We.a.Item,{children:Object(x.jsx)(Ae.a,{type:"dashed",className:"addAD-Button",onClick:function(){return n()},block:!0,icon:Object(x.jsx)(ft.a,{}),children:"\u6dfb\u52a0\u8df3\u8f6c"})})]})}}),"3"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info3",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})}),Object(x.jsx)(xt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy})]})}},{key:"getRefresh",value:function(){var e=this,t=this;ce(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),kt=ze.a.confirm,_t=Me.a.TextArea,Rt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null},current:"",visible:!1,deleteVisible:!1,flowState:1,textareaValue:"",MarkdownContent:"",titleValue:"",fileList:[],file:null,btnsArray:[],btns:{title:"",actionURL:""},editVisible:!1,currentRowData:"",isCopy:!1,filter_fields:[],searchText:"",searchedColumn:"",searchArr:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){return{filterDropdown:function(n){n.setSelectedKeys;var i=n.selectedKeys;n.confirm,n.clearFilters;return Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),value:i[0],onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]})},filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return e.state.searchedColumn===t?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]=[t.target.value],e.state.searchedColumn=a},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.searchInput[a].handleReset(t),e.state.searchData[a]=[],e.search()},e.columns=[{title:"\u6a21\u7248ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"\u6807\u9898",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u6807\u9898")),{title:"\u6b63\u6587",key:"content",dataIndex:"content",align:"center",textWrap:"word-break",ellipsis:!0,render:function(e,t){return"text"==t.content_format?Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.content,children:e.content})}):Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.text,children:e.text})})}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updated_at",key:"updated_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleCopy(a,t)},children:"\u590d\u5236"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.onEditorChange=function(t){e.setState({initValue:t})},e.formRef=i.a.createRef(),e.controls=["bold","italic","underline","separator","text-color","strike-through","text-align","code"],e.radioChange=function(t){console.log(t),e.setState({flowState:t})},e.uploadProps={action:"http://192.168.41.49/api/v1.0/upload",onRemove:function(t){e.setState((function(a){var n=a.fileList,i=n.indexOf(t);return n.splice(i,1),e.setState({fileList:e.newFileList}),!1}))},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?Le.b.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&Le.b.error("".concat(e.file.name," file upload failed."))},beforeUpload:function(t){console.log("beforeUpload:",t),e.state.fileList.push(t),e.setState({file:e.state.file})},fileList:e.state.fileList},e.editorRef=i.a.createRef(),e.onMarkdownChange=function(t,a){var n=e.editorRef.current.getInstance().getMarkdown().match(/\{{(.+?)\}}/g),i=[];n&&(i=n.map((function(e){return e.length?e.substring(2,e.length-2):null})));var s=e.formRef.current.getFieldValue("variable")||[];if(0!=i.length){var r=s.map((function(e){return e.name}));i=Array.from(new Set(i));e:for(var c=0;c<i.length;c++){for(var l=0;l<r.length;l++)if(r[l]==i[c])continue e;s.push({name:i[c]})}e.formRef.current.setFieldsValue({variable:s})}e.setState({MarkdownContent:e.editorRef.current.getInstance().getMarkdown()})},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){var a={variable:e.formRef.current.getFieldValue("variable")};a.content_format=["text","markdown","actionCard"][parseInt(e.state.flowState)-1],1===e.state.flowState?a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{content:e.state.textareaValue}}):2===e.state.flowState?(console.log(e.state.MarkdownContent),a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{text:e.state.MarkdownContent,title:e.state.titleValue},path:null})):3===e.state.flowState&&(a=Object(C.a)(Object(C.a)(Object(C.a)({},a),t),{},{title:e.state.titleValue,content:{title:e.state.titleValue,text:e.state.MarkdownContent,btnOrientation:"0",btns:e.formRef.current.getFieldValue("users")},path:null})),ue(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);kt({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){be(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!1}),console.log(e.state.currentRowData)},e.handleCopy=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0,isCopy:!0})},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEditOk=function(t,a){var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard"})}je(t,n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e.handleCopyOk=function(t,a){console.log("okk",a);var n={variable:a.variable,title:a.title};switch(a.content_format){case"text":n=Object(C.a)(Object(C.a)({},n),{},{content:{content:a.content},content_format:"text"});break;case"markdown":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title},content_format:"markdown"});break;case"actionCard":n=Object(C.a)(Object(C.a)({},n),{},{content:{text:a.MarkdownContent,title:a.title,btnOrientation:"0",btns:a.users},content_format:"actionCard"})}ue(n).then((function(t){e.setState({editVisible:!1}),Le.b.success("\u590d\u5236\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u590d\u5236\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;he({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"handleTextareaChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(a){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));for(var s=0;s<a.length;s++)n.push({name:a[s]});for(var r=0;r<i.length;r++){for(var c=-1,l=0;l<n.length;l++)i[r]===n[l].name&&(c=l);-1!==c&&n.splice(c,1)}this.formRef.current.setFieldsValue({variable:n})}this.setState({textareaValue:e.target.value})}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"onTitleChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current({variable:n})}}},{key:"onURLChange",value:function(e){var t=e.target.value.match(/\{{(.+?)\}}/g),a=[];t&&(a=t.map((function(e){return e.length?e.substring(2,e.length-2):null})));var n=this.formRef.current.getFieldValue("variable")||[];if(0!=a.length){var i=n.map((function(e){return e.name}));a=Array.from(new Set(a));e:for(var s=0;s<a.length;s++){for(var r=0;r<i.length;r++)if(i[r]==a[s])continue e;n.push({name:a[s]})}this.formRef.current.setFieldsValue({variable:n})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.textareaValue,n=t.titleValue;t.initValue;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(g.a,{})," \u9489\u9489\u5de5\u4f5c\u901a\u544a"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u6a21\u7248",width:"645px",bodyStyle:{margin:"10px 10px"},visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u4fdd\u5b58",cancelText:"\u53d6\u6d88",destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{children:Object(x.jsxs)(tt.a,{children:[Object(x.jsx)(at.a,{span:4}),Object(x.jsx)(at.a,{span:20,className:"radio-content",children:Object(x.jsxs)(gt.a.Group,{defaultValue:1,onChange:function(t){return e.radioChange(t.target.value)},children:[Object(x.jsx)(gt.a,{value:1,children:"\u6587\u672c"}),Object(x.jsx)(gt.a,{value:2,children:"Markdown"}),Object(x.jsx)(gt.a,{value:3,children:"ActionCard"})]})})]})}),Object(x.jsx)(We.a.Item,{label:"\u6807\u9898\u540d\u79f0",name:"title",rules:[{required:!0,validator:function(e,t,a){n?a():a("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{placeholder:"\u9ed8\u8ba4\u4e3a\u6a21\u677f\u540d\u79f0",value:n,onChange:this.handleTitleChange.bind(this),style:{width:"461px",height:"40px",borderRadius:" 5px "}})}),"1"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info1",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(_t,{value:a,rows:4,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",onChange:this.handleTextareaChange.bind(this),style:{width:"461px",height:"260px",borderRadius:" 5px "}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("div",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"2"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info2",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),"3"==this.state.flowState&&Object(x.jsx)(We.a.List,{name:"users",children:function(t,a){var n=a.add,i=a.remove;return Object(x.jsxs)(x.Fragment,{children:[t.map((function(t){var a=t.key,n=t.name,s=t.fieldKey,r=Object(w.a)(t,["key","name","fieldKey"]);return Object(x.jsxs)(qe.b,{style:{display:"flex"},align:"baseline",children:[Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad addAD-Input-Dad-First"},r),{},{name:[n,"title"],fieldKey:[s,"title"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6309\u94ae\u540d\u79f0"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u6309\u94ae\u540d\u79f0",onChange:e.onTitleChange.bind(e)})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({className:"addAD-Input-Dad"},r),{},{name:[n,"actionURL"],fieldKey:[s,"actionURL"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u94fe\u63a5url"}],children:Object(x.jsx)(Me.a,{className:"addAD-Input",placeholder:"\u94fe\u63a5url",onChange:e.onURLChange.bind(e)})})),Object(x.jsx)(Ze.a,{onClick:function(){return i(n)}})]},a)})),Object(x.jsx)(We.a.Item,{children:Object(x.jsx)(Ae.a,{type:"dashed",className:"addAD-Button",onClick:function(){return n()},block:!0,icon:Object(x.jsx)(ft.a,{}),children:"\u6dfb\u52a0\u8df3\u8f6c"})})]})}}),"3"==this.state.flowState&&Object(x.jsxs)(We.a.Item,{label:"\u6b63\u6587",name:"info3",rules:[{required:!0,validator:function(t,a,n){e.state.MarkdownContent?n():n("\u8bf7\u8f93\u5165\u6b63\u6587")}}],children:[Object(x.jsx)(pt.Editor,{ref:this.editorRef,placeholder:"\u8bf7\u8f93\u5165\u6b63\u6587",previewStyle:"vertical",height:"330px",initialEditType:"markdown",useCommandShortcut:!0,width:"463px",onChange:this.onMarkdownChange,config:{markdown:"## Test\n                                            ```\n                                            console.log('what can i do for you')\n                                            ```\n\n                                            # 123123",onload:function(e,t){e.getMarkdown(),e.getHTML()}}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"\u793a\u4f8b\uff1a"}),Object(x.jsx)("p",{children:"<p>\u5b89\u5168\u8b66\u544a</p>"})]}),trigger:"click",children:Object(x.jsx)("span",{children:"\u67e5\u770b\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.List,{name:"variable",children:function(e,t){var a=t.remove;return Object(x.jsx)(x.Fragment,{children:e.map((function(e){var t=e.key,n=e.name,i=e.fieldKey,s=Object(w.a)(e,["key","name","fieldKey"]),r="";return r=0==t?Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({label:"\u53c2\u6570\u53d8\u91cf",className:"variableFirst"},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:220},children:Object(x.jsx)(Me.a,{disabled:!0})})):Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"name"],fieldKey:[i,"name"],rules:[{required:!0}],style:{width:139,marginLeft:80},children:Object(x.jsx)(Me.a,{disabled:!0})})),Object(x.jsxs)(qe.b,{style:{display:"flex",marginBottom:8,marginLeft:15},align:"baseline",children:[r,Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"value"],fieldKey:[i,"value"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53c2\u6570\u793a\u4f8b"}],style:{width:130},children:Object(x.jsx)(Me.a,{placeholder:"\u53c2\u6570\u793a\u4f8b"})})),Object(x.jsx)(We.a.Item,Object(C.a)(Object(C.a)({},s),{},{name:[n,"desc"],fieldKey:[i,"desc"],rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}],style:{width:181},children:Object(x.jsx)(Me.a,{placeholder:"\u5907\u6ce8"})})),Object(x.jsx)(Ze.a,{onClick:function(){return a(n)}})]},t)}))})}})]})}),Object(x.jsx)(xt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.state.isCopy?this.handleCopyOk:this.handleEditOk,isCopy:this.state.isCopy})]})}},{key:"getRefresh",value:function(){var e=this,t=this;he(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),Ft=a(510),Dt=a(181),It=a(183),Vt=a(515),Nt=a(182),Tt=a(522),zt=(a(266),ze.a.confirm),Mt=(Me.a.TextArea,rt.a.Option),qt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null},current:"",visible:!1,visibleDetail:!1,flowState:"",styleFlowState:1,RadioFlowState:!0,atflowState:"",titleValue:"",tpl_id:"",cronValue:"",toWhoValue:"",theUserName:"",cc:"",bcc:"",webhook:"",is_at_all:!1,theUser2Name:"",mailDateSource:[],SMSDateSource:[],userDateSource:"",robotDateSource:[],groupDateSource:[],noticeDateSource:[],detail:{tpl:{title:""},reason:"",data:{webhook:"",name:"",agent_id:"",chat_id:""}},task_id:"",filter_fields:{},searchText:"",searchedColumn:"",searchArr:{},searchData:{}},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.formRef=i.a.createRef(),e.searchInput=[],e.getColumnSearchProps=function(t,a){var n="";return n="style"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200,marginBottom:0},children:Object(x.jsx)(We.a.Item,{name:"search",style:{marginBottom:8,marginTop:5},children:Object(x.jsxs)(rt.a,{showSearch:!0,allowClear:!0,value:e.state.searchArr["".concat(t)]?e.state.searchArr["".concat(t)]:"",style:{width:188},placeholder:"\u641c\u7d22 ".concat(a),optionFilterProp:"children",onSelect:function(a){return e.handleSearch(a,t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(x.jsx)(Mt,{value:"ding_record",children:"\u9489\u9489\u5f85\u529e"}),Object(x.jsx)(Mt,{value:"ding_robot",children:"\u9489\u9489\u673a\u5668\u4eba"}),Object(x.jsx)(Mt,{value:"ding_group",children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(Mt,{value:"ding_notice",children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(Mt,{value:"mail",children:"\u90ae\u4ef6"}),Object(x.jsx)(Mt,{value:"sms",children:"\u77ed\u4fe1"})]})})}):"is_periodic_tasks"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200},children:Object(x.jsx)(We.a.Item,{name:"search",children:Object(x.jsxs)(gt.a.Group,{style:{display:"block"},onChange:function(a){e.state.searchArr[t]=a.target.value},children:[Object(x.jsx)(gt.a,{style:{display:"inline",margin:30},value:!0,children:"\u662f"}),Object(x.jsx)(gt.a,{style:{display:"inline"},value:!1,children:"\u5426"})]})})}):Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),{filterDropdown:Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[n,Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]}),filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return"style"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.styleEtoC(e.state.searchData[t])],autoEscape:!0,textToHighlight:e.styleEtoC(a)?e.styleEtoC(a).toString():""})}):e.styleEtoC(a):"is_periodic_tasks"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]?"\u662f":"\u5426"],autoEscape:!0,textToHighlight:a||a?"\u662f":"\u5426".toString()})}):a?"\u662f":"\u5426":e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]="style"===a?[t]:[t.target.value]},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.state.searchArr[a]=[],e.search()},e.columns=[{title:"\u63a8\u9001ID",dataIndex:"id",key:"id",align:"center",width:100},Object(C.a)({title:"\u63a8\u9001\u540d\u79f0",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u63a8\u9001\u540d\u79f0")),Object(C.a)({title:"\u4efb\u52a1ID",dataIndex:"task_id",key:"task_id",align:"center",width:150},e.getColumnSearchProps("task_id","\u4efb\u52a1ID")),Object(C.a)({title:"\u63a8\u9001\u7c7b\u578b",key:"style",dataIndex:"style",align:"center",width:150},e.getColumnSearchProps("style","\u63a8\u9001\u7c7b\u578b")),{title:"\u5468\u671f\u53d1\u9001",key:"is_periodic_tasks",dataIndex:"is_periodic_tasks",align:"center",width:120,render:function(e){return e?Object(x.jsx)(Dt.a,{style:{fontSize:"17px",color:"#0073E1 "}}):Object(x.jsx)(It.a,{style:{fontSize:"17px",color:"#B1B1B1 "}})}},{title:"\u72b6\u6001",key:"status",dataIndex:"status",align:"center",width:80,render:function(e){return 1e3==e?Object(x.jsx)(Dt.a,{style:{fontSize:"17px",color:"#0073E1 "}}):999==e?Object(x.jsx)(It.a,{style:{fontSize:"17px",color:"#B1B1B1 "}}):300==e||100==e?Object(x.jsx)(Vt.a,{style:{fontSize:"17px",color:"#B1B1B1 "}}):Object(x.jsx)(Nt.a,{style:{fontSize:"17px",color:"#B1B1B1 "}})}},{title:"\u63a8\u9001\u65f6\u95f4",dataIndex:"created_at",key:"created_at",align:"center",width:180},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,fixed:"right",render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDetail(a,t)},children:"\u8be6\u60c5"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleSend(a,t)},children:"\u91cd\u53d1"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.cronExample=Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"https://cron.qqe2.com/ "}),Object(x.jsx)("p",{children:"https://tool.lu/crontab"}),Object(x.jsx)("p",{children:"https://mviess.de/sysadm/crontabmaker/index.php"})]}),e.styleEtoC=function(e){return"ding_group"==e?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==e?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==e?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==e?"\u9489\u9489\u5f85\u529e":"mail"==e?"\u90ae\u4ef6":"sms"==e?"\u77ed\u4fe1":"tel"==e?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){var a={};11==e.state.atflowState&&e.setState({is_at_all:!0}),1===e.state.flowState?a={title:e.state.titleValue,data:{to:e.state.toWhoValue,username:e.state.theUserName,cc:e.state.cc,bcc:e.state.bcc},tpl_id:e.state.tpl_id,style:"mail",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:2===e.state.flowState?a={title:e.state.titleValue,data:{to:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"sms",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:3===e.state.flowState?a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,agent_id:e.state.theUser2Name,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_notice",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:4===e.state.flowState?a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,chat_id:e.state.theUser2Name,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_group",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:5===e.state.flowState&&(a={title:e.state.titleValue,data:{webhook:e.state.webhook,is_at_all:e.state.is_at_all,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_robot",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}),fe(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);zt({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){pe(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleDetail=function(t,a){me(a.id).then((function(t){0==t.code?(e.setState({visibleDetail:!0,detail:t.data}),console.log(t)):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleSend=function(t,a){var n=Object(k.a)(e);zt({title:"",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u91cd\u65b0\u53d1\u9001".concat(a.title,"\u5417\uff1f"),okText:"\u53d1\u9001",cancelText:"\u53d6\u6d88",onOk:function(){n.sendAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.sendAction=function(t,a){xe(a.id).then((function(t){0==t.code?(Le.b.success("\u53d1\u9001\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.task_id=this.props.location.search.slice(this.props.location.search.lastIndexOf("=")+1,this.props.location.search.length),ge({page:this.state.pagination.current,page_size:this.state.pagination.pageSize,task_id:this.state.task_id}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(Tt.a,{}),"  \u5386\u53f2\u63a8\u9001"]}),Object(x.jsx)(tt.a,{style:{marginBottom:10},children:Object(x.jsx)(at.a,{span:8,children:Object(x.jsxs)(Ft.a,{style:{marginLeft:30,marginTop:20},children:[Object(x.jsx)(Ft.a.Item,{onClick:function(t){e.setState({task_id:""}),e.getRefresh()},children:Object(x.jsx)(h.b,{to:"/task/history",children:"\u6240\u6709\u5386\u53f2"})}),""!==this.state.task_id&&Object(x.jsxs)(Ft.a.Item,{children:["id:",this.state.task_id,"\u7684\u5386\u53f2"]})]})})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)",x:"100%"}}),Object(x.jsxs)(ze.a,{title:"\u8be6\u60c5",width:"645px",className:"Detail",visible:this.state.visibleDetail,onCancel:function(t){e.setState({visibleDetail:!1})},footer:[],maskStyle:{background:"rgba(217,218,217,0.5)"},bodyStyle:{overflowY:"auto",marginLeft:"45px",padding:"15px 10% 80px 10%"},children:[Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u540d\u79f0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u7c7b\u578b\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==this.state.detail.style?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==this.state.detail.style?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==this.state.detail.style?"\u9489\u9489\u5f85\u529e":"mail"==this.state.detail.style?"\u90ae\u4ef6":"sms"==this.state.detail.style?"\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677fid\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl_id}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677f\u6807\u9898\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u65f6\u95f4\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.created_at}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u53d1\u4ef6\u65b9\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?this.state.detail.data.chat_id:"ding_robot"==this.state.detail.style?this.state.detail.data.webhook:"ding_notice"==this.state.detail.style?this.state.detail.data.agent_id:"mail"==this.state.detail.style?this.state.detail.data.name:"sms"==this.state.detail.style?"\u7ba1\u7406\u5458\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7ba1\u7406\u5458\u7535\u8bdd":"\u7ba1\u7406\u5458"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6536\u4ef6\u65b9\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.receiver}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\uff1a"}),Object(x.jsx)("span",{className:"ans",children:1e3==this.state.detail.status?"\u5b8c\u6210":999==this.state.detail.status?"\u5931\u8d25":300==this.state.detail.status?"\u6267\u884c\u4e2d":100==this.state.detail.status?"\u7b49\u5f85\u4e2d":"\u672a\u77e5\u72b6\u6001"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\u539f\u56e0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.reason}),Object(x.jsx)("br",{})]})]})}},{key:"getRefresh",value:function(){var e=this,t=this;ge(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),At=a(95),Et=a(509),Lt=ze.a.confirm,Kt=(Me.a.TextArea,rt.a.Option),Bt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:8,showSizeChanger:!0,showQuickJumper:!0,showTotal:null},current:"",visible:!1,visibleDetail:!1,flowState:"",styleFlowState:1,RadioFlowState:!0,atflowState:"",titleValue:"",tpl_id:"",cronValue:"",toWhoValue:"",theUserName:"",cc:"",bcc:"",webhook:"",is_at_all:!1,theUser2Name:"",mailDateSource:[],SMSDateSource:[],userDateSource:"",robotDateSource:[],groupDateSource:[],noticeDateSource:[],detail:{tpl:{title:""},reason:"",data:{webhook:"",name:"",agent_id:"",chat_id:""}},task_id:""},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.formRef=i.a.createRef(),e.columns=[{title:"\u63a8\u9001ID",dataIndex:"id",key:"id",align:"center",width:100},{title:"\u63a8\u9001\u540d\u79f0",key:"title",dataIndex:"title",align:"center",width:200},{title:"\u63a8\u9001\u7c7b\u578b",key:"style",dataIndex:"style",align:"center",width:150,render:function(e){return"ding_group"==e?Object(x.jsx)(x.Fragment,{children:"\u9489\u9489\u7fa4\u901a\u77e5"}):"ding_robot"==e?Object(x.jsx)(x.Fragment,{children:" \u9489\u9489\u673a\u5668\u4eba"}):"ding_notice"==e?Object(x.jsx)(x.Fragment,{children:" \u9489\u9489\u516c\u544a"}):"mail"==e?Object(x.jsx)(x.Fragment,{children:" \u90ae\u4ef6"}):"sms"==e?Object(x.jsx)(x.Fragment,{children:" \u77ed\u4fe1"}):"tel"==e?Object(x.jsx)(x.Fragment,{children:" \u7535\u8bdd"}):Object(x.jsx)(x.Fragment,{children:" \u672a\u77e5\u7c7b\u578b"})}},{title:"\u53d1\u9001\u65b9\u5f0f",key:"is_periodic_tasks",dataIndex:"is_periodic_tasks",align:"center",width:150,render:function(e){return 0==e?Object(x.jsx)(x.Fragment,{children:"\u7acb\u5373\u53d1\u9001 "}):Object(x.jsx)(x.Fragment,{children:" \u5b9a\u65f6\u53d1\u9001"})}},{title:"\u72b6\u6001",key:"status",dataIndex:"status",align:"center",width:150,render:function(e){return 1e3==e?Object(x.jsx)(x.Fragment,{children:"\u5b8c\u6210"}):999==e?Object(x.jsx)(x.Fragment,{children:" \u5931\u8d25"}):300==e?Object(x.jsx)(x.Fragment,{children:" \u6267\u884c\u4e2d"}):100==e?Object(x.jsx)(x.Fragment,{children:" \u7b49\u5f85\u4e2d"}):Object(x.jsx)(x.Fragment,{children:" \u672a\u77e5\u72b6\u6001"})}},{title:"\u63a8\u9001\u65f6\u95f4",dataIndex:"created_at",key:"created_at",align:"center",width:200},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDetail(a,t)},children:"\u8be6\u60c5"}),Object(x.jsx)(Ae.a,{className:"handle-button",children:"\u91cd\u53d1"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"})]})}}],e.cronExample=Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"https://cron.qqe2.com/ "}),Object(x.jsx)("p",{children:"https://tool.lu/crontab"}),Object(x.jsx)("p",{children:"https://mviess.de/sysadm/crontabmaker/index.php"})]}),e.onFocusMail=function(t){var a=Object(k.a)(e);P({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({mailDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusSMS=function(t){var a=Object(k.a)(e);Q({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({SMSDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusRobot=function(t){var a=Object(k.a)(e);ne({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({robotDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusGroup=function(t){var a=Object(k.a)(e);ce({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({groupDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusNotice=function(t){var a=Object(k.a)(e);he({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({noticeDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusUser=function(t){var a=Object(k.a)(e);W().then((function(e){0==e.code||200==e.code?a.setState({userDateSource:e.data}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.MailCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.SMSCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.RobotCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.GroupCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.NoticeCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.showModal=function(){e.setState({visible:!0})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){var a={};11==e.state.atflowState&&e.setState({is_at_all:!0}),1===e.state.flowState?a={title:e.state.titleValue,data:{to:e.state.toWhoValue,username:e.state.theUserName,cc:e.state.cc,bcc:e.state.bcc},tpl_id:e.state.tpl_id,style:"mail",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:2===e.state.flowState?a={title:e.state.titleValue,data:{to:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"sms",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:3===e.state.flowState?a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,agent_id:e.state.theUser2Name,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_notice",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:4===e.state.flowState?a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,chat_id:e.state.theUser2Name,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_group",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}:5===e.state.flowState&&(a={title:e.state.titleValue,data:{webhook:e.state.webhook,is_at_all:e.state.is_at_all,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_robot",is_run_now:e.state.RadioFlowState,crontab_info:e.state.cronValue,is_periodic_tasks:!e.state.RadioFlowState}),fe(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);Lt({title:"\u5220\u9664\u6a21\u7248",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){pe(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleDetail=function(t,a){me(a.id).then((function(t){0==t.code?(e.setState({visibleDetail:!0,detail:t.data}),console.log(t)):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.location.search.slice(this.props.location.search.lastIndexOf("=")+1,this.props.location.search.length)),this.state.task_id=this.props.location.search.slice(this.props.location.search.lastIndexOf("=")+1,this.props.location.search.length),console.log(this.state.task_id),ge({page:this.state.pagination.current,page_size:this.state.pagination.pageSize,task_id:this.state.task_id}).then((function(t){e.setState({dataSource:t.data.results,pagination:{className:"dingdingRobot-pagination",current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange}}),console.log(t)}))}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"handleToWhoChange",value:function(e){this.setState({toWhoValue:e.target.value})}},{key:"handleUserChange",value:function(e){this.setState({theUserName:e})}},{key:"handleUser2Change",value:function(e){this.setState({theUser2Name:e.target.value})}},{key:"handleWebhookChange",value:function(e){this.setState({webhook:e.target.value})}},{key:"handleCronChange",value:function(e){console.log(e),this.setState({cronValue:e.target.value})}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.titleValue,n=t.toWhoValue,i=t.webhook,s=t.RadioFlowState,r=t.cronValue,c=t.theUser2Name,l=[],o=0;o<this.state.userDateSource.length;o++)l.push(Object(x.jsx)(Kt,Object(At.a)({children:!0},"children",this.state.userDateSource[o].name),this.state.userDateSource[o].value));for(var d=[],u=0;u<this.state.mailDateSource.length;u++)d.push({value:this.state.mailDateSource[u].id,label:this.state.mailDateSource[u].title,children:[{value:this.state.mailDateSource[u].content.content,label:this.state.mailDateSource[u].content.content}]});for(var b=[],j=0;j<this.state.SMSDateSource.length;j++)b.push({value:this.state.SMSDateSource[j].id,label:this.state.SMSDateSource[j].title,children:[{value:this.state.SMSDateSource[j].content.content,label:this.state.SMSDateSource[j].content.content}]});for(var g=[],f=0;f<this.state.robotDateSource.length;f++)g.push({value:this.state.robotDateSource[f].id,label:this.state.robotDateSource[f].title,children:[{value:this.state.robotDateSource[f].content.text,label:this.state.robotDateSource[f].content.text}]});for(var p=[],m=0;m<this.state.noticeDateSource.length;m++)p.push({value:this.state.noticeDateSource[m].id,label:this.state.noticeDateSource[m].title,children:[{value:this.state.noticeDateSource[m].content.text,label:this.state.noticeDateSource[m].content.text}]});for(var O=[],v=0;v<this.state.groupDateSource.length;v++)O.push({value:this.state.groupDateSource[v].id,label:this.state.groupDateSource[v].title,children:[{value:this.state.groupDateSource[v].content.text,label:this.state.groupDateSource[v].content.text}]});return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(Tt.a,{}),"  id:",this.state.task_id,"\u7684\u5386\u53f2\u63a8\u9001\u8bb0\u5f55"]}),Object(x.jsx)("div",{children:Object(x.jsxs)(tt.a,{justify:"center",children:[Object(x.jsx)(at.a,{span:8,children:Object(x.jsx)(h.b,{to:"/task",children:Object(x.jsx)(Ae.a,{className:"input-button",type:"primary",children:"\u8fd4\u56de"})})}),Object(x.jsx)(at.a,{span:6,children:Object(x.jsx)(Me.a,{className:"input",prefix:Object(x.jsx)(He.a,{}),placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd"})}),Object(x.jsx)(at.a,{span:8,children:Object(x.jsx)(Ae.a,{className:"input-button",type:"primary",htmlType:"submit",children:"\u641c\u7d22"})})]})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u63a8\u9001",width:"645px",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u6267\u884c",cancelText:"\u53d6\u6d88",bodyStyle:{height:"580px",overflowY:"auto",marginLeft:"45px"},children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u540d\u79f0",name:"title",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u6807\u9898")}}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a8\u9001\u540d\u79f0",value:a,onChange:this.handleTitleChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u7c7b\u578b",name:"style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({flowState:t})},className:"selectStyle",children:[Object(x.jsx)(Kt,{value:1,children:"\u90ae\u4ef6"}),Object(x.jsx)(Kt,{value:2,children:"\u77ed\u4fe1"}),Object(x.jsx)(Kt,{value:3,children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(Kt,{value:4,children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(Kt,{value:5,children:"\u9489\u9489\u673a\u5668\u4eba"})]})}),"1"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u4ef6\u4eba",name:"mail-1",rules:[{required:!0}],children:Object(x.jsx)(rt.a,{placeholder:"\u8bf7\u9009\u62e9\u53d1\u4ef6\u4eba",style:{width:400,height:40,borderRadius:5},onChange:this.handleUserChange.bind(this),onFocus:this.onFocusUser,children:l})}),Object(x.jsx)(We.a.Item,{label:"\u6536\u4ef6\u4eba",name:"mail-3",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u90ae\u7bb1",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({RadioFlowState:t.target.value})},value:s,children:[Object(x.jsx)(gt.a,{value:!0,children:"\u7acb\u5373\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:!1,children:"\u5b9a\u65f6\u53d1\u9001"})]})}),0==s&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:r,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},children:[Object(x.jsx)(Kt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Kt,{value:112,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:d,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusMail,onChange:this.MailCopyChange})})})]}),"2"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u65b9",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u65b9",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({RadioFlowState:t.target.value})},value:s,children:[Object(x.jsx)(gt.a,{value:!0,children:"\u7acb\u5373\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:!1,children:"\u5b9a\u65f6\u53d1\u9001"})]})}),0==s&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:r,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},children:[Object(x.jsx)(Kt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Kt,{value:112,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:b,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusSMS,onChange:this.SMSCopyChange})})})]}),"3"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",value:c,onChange:this.handleUser2Change.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u5bf9\u8c61",rules:[{required:!0}],style:{minHeight:10},children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({atflowState:t})},children:[Object(x.jsx)(Kt,{value:11,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(Kt,{value:12,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),12==this.state.atflowState&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"mail-5",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({RadioFlowState:t.target.value})},value:s,children:[Object(x.jsx)(gt.a,{value:!0,children:"\u7acb\u5373\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:!1,children:"\u5b9a\u65f6\u53d1\u9001"})]})}),0==s&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:r,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},children:[Object(x.jsx)(Kt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Kt,{value:112,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:p,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusNotice,onChange:this.NoticeCopyChange})})})]}),"4"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",value:c,onChange:this.handleUser2Change.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({RadioFlowState:t.target.value})},value:s,children:[Object(x.jsx)(gt.a,{value:!0,children:"\u7acb\u5373\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:!1,children:"\u5b9a\u65f6\u53d1\u9001"})]})}),0==s&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:r,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},children:[Object(x.jsx)(Kt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Kt,{value:112,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:O,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusGroup,onChange:this.GroupCopyChange})})})]}),"5"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",value:i,onChange:this.handleWebhookChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u5bf9\u8c61",rules:[{required:!0}],style:{minHeight:10},children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({atflowState:t})},children:[Object(x.jsx)(Kt,{value:10,children:"\u4e0d@\u4efb\u4f55\u4eba"}),Object(x.jsx)(Kt,{value:11,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(Kt,{value:12,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),12==this.state.atflowState&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"mail-5",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({RadioFlowState:t.target.value})},value:s,children:[Object(x.jsx)(gt.a,{value:!0,children:"\u7acb\u5373\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:!1,children:"\u5b9a\u65f6\u53d1\u9001"})]})}),0==s&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:r,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},children:[Object(x.jsx)(Kt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Kt,{value:112,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:g,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusRobot,onChange:this.RobotCopyChange})})})]})]})}),Object(x.jsxs)(ze.a,{title:"\u8be6\u60c5",width:"645px",visible:this.state.visibleDetail,onCancel:function(t){e.setState({visibleDetail:!1})},maskStyle:{background:"rgba(217,218,217,0.5)"},bodyStyle:{height:"580px",overflowY:"auto",marginLeft:"45px"},children:[Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u540d\u79f0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u540d\u79f0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==this.state.detail.style?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==this.state.detail.style?"\u9489\u9489\u516c\u544a":"mail"==this.state.detail.style?"\u90ae\u4ef6":"sms"==this.state.detail.style?"\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677fid\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl_id}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677f\u6807\u9898\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u521b\u5efa\u65f6\u95f4\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.created_at}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u53d1\u4ef6\u65b9\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?this.state.detail.data.chat_id:"ding_robot"==this.state.detail.style?this.state.detail.data.webhook:"ding_notice"==this.state.detail.style?this.state.detail.data.agent_id:"mail"==this.state.detail.style?this.state.detail.data.name:"sms"==this.state.detail.style?"\u7ba1\u7406\u5458\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7ba1\u7406\u5458\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6536\u4ef6\u65b9\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"\u6682\u65e0"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\uff1a"}),Object(x.jsx)("span",{className:"ans",children:1e3==this.state.detail.status?"\u5b8c\u6210":999==this.state.detail.status?"\u5931\u8d25":300==this.state.detail.status?"\u6267\u884c\u4e2d":100==this.state.detail.status?"\u7b49\u5f85\u4e2d":"\u672a\u77e5\u72b6\u6001"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\u539f\u56e0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.reason}),Object(x.jsx)("br",{})]})]})}},{key:"getRefresh",value:function(){var e=this,t=this;ge(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{className:"dingdingRobot-pagination",current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")}}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),Ut=a(173),Wt=a(285),Pt=(a(267),a(210)),Ht=a.n(Pt);a(497);Ht.a.locale("zh-cn");var Gt=ze.a.confirm,Jt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={titleValue:"",tpl_id:"",cronValue:"",toWhoValue:"",theUserName:"",cc:"",bcc:"",webhook:"",is_at_all:!1,theUser2Name:"",is_run_now:!1,is_periodic_tasks:!1,mailDateSource:[],SMSDateSource:[],userDateSource:"",robotDateSource:[],groupDateSource:[],noticeDateSource:[],recordDateSource:[],styleFlowState:"111",atflowState:"",cronChange:!1},e.onFocusUser=function(t){var a=Object(k.a)(e);W().then((function(e){0==e.code||200==e.code?a.setState({userDateSource:e.data}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusMail=function(t){var a=Object(k.a)(e);P({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({mailDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusSMS=function(t){var a=Object(k.a)(e);Q({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({SMSDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusRobot=function(t){var a=Object(k.a)(e);ne({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({robotDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusGroup=function(t){var a=Object(k.a)(e);ce({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({groupDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusNotice=function(t){var a=Object(k.a)(e);he({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({noticeDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusRecord=function(t){var a=Object(k.a)(e);$({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({recordDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.diff=function(t){var a=Object(k.a)(e),n=e.state.styleBefore;console.log(n,t),("ding_group"!=n&&"ding_robot"!=n&&"ding_notice"!=n&&"ding_record"!=n||"mail"!=t&&"sms"!=t)&&("ding_group"!==t&&"ding_robot"!==t&&"ding_notice"!==t&&"ding_record"!=t||"mail"!==n&&"sms"!==n)&&("mail"!==t&&"sms"!==t||"mail"!==n&&"sms"!==n)&&("mail"!==n&&"sms"!==n||"mail"!==t&&"sms"!==t)?(a.setState({styleBefore:t}),a.editFormRef.current.setFieldsValue({www:[]})):Gt({title:"\u66f4\u6539\u7c7b\u578b",icon:Object(x.jsx)(Je.a,{}),content:Object(x.jsxs)("div",{children:[Object(x.jsxs)("p",{children:["\u60a8\u786e\u5b9a\u8981\u5f3a\u5236\u628a",e.styleEtoC(n),"\u8f6c\u6362\u4e3a",e.styleEtoC(t),"\u4e48\uff1f"]}),Object(x.jsx)("p",{children:"\u5982\u679c\u6b64\u4efb\u52a1\u73b0\u6709\u901a\u8fc7\u63a5\u53e3api\u5f62\u5f0f\u88ab\u8c03\u7528\uff0c\u8bf7\u901a\u77e5\u8c03\u7528\u65b9\uff1a\u201c\u4efb\u52a1\u6e20\u9053\u201d\u5df2\u6539\u53d8\uff0c\u8bf7\u6ce8\u610f\u4efb\u52a1\u201c\u63a5\u6536\u65b9\u201d\u914d\u7f6e\u3002"})]}),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){a.setState({styleBefore:t}),a.editFormRef.current.setFieldsValue({www:[]})},onCancel:function(){a.editFormRef.current.setFieldsValue({style:n})}})},e.styleEtoC=function(e){return"ding_group"==e?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==e?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==e?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==e?"\u9489\u9489\u5f85\u529e":"mail"==e?"\u90ae\u4ef6":"sms"==e?"\u77ed\u4fe1":"tel"==e?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"},e.cronExample=Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"https://cron.qqe2.com/ "}),Object(x.jsx)("p",{children:"https://tool.lu/crontab"}),Object(x.jsx)("p",{children:"https://mviess.de/sysadm/crontabmaker/index.php"})]}),e.editFormRef=i.a.createRef(),e.handleCancel=function(){var t=e.props.onCancel;e.editFormRef.current.resetFields(),t()},e.handleOk=function(){var t=e.props,a=(t.item,t.onOk),n=e.props.currentRowData,i=n.id;n.content_format,n.data;e.editFormRef.current.validateFields().then((function(t){console.log(t);var n=Object(C.a)(Object(C.a)({},t),{},{atflowState:e.state.atflowState});a(i,n)})).catch((function(e){console.log(e)}))},e}return Object(l.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.setState({is_periodic_tasks:e.currentRowData.is_periodic_tasks,is_at_all:!!Object.hasOwnProperty.call(e.currentRowData,"data")&&e.currentRowData.data.is_at_all,atflowState:"ding_robot"==e.currentRowData.style&&Object.hasOwnProperty.call(e.currentRowData,"data")?e.currentRowData.data.is_at_all?11:e.currentRowData.data.user_id_list.length?12:10:"",recordFlowState:!!Object.hasOwnProperty.call(e.currentRowData,"data")&&e.currentRowData.data.is_alone,styleBefore:e.currentRowData.style})}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.visible,n=t.currentRowData,i=rt.a.Option,s=n.data,r=n.is_periodic_tasks,c=n.is_run_now,l=n.tpl_id,o=c?2:r?3:1,d=[],h=0;h<this.state.userDateSource.length;h++)d.push(Object(x.jsx)(i,Object(At.a)({children:!0},"children",this.state.userDateSource[h].name),this.state.userDateSource[h].value));for(var u=[],b=0;b<this.state.mailDateSource.length;b++)u.push({value:this.state.mailDateSource[b].id,label:this.state.mailDateSource[b].title,children:[{value:this.state.mailDateSource[b].id,label:this.state.mailDateSource[b].content.content}]});for(var j=[],g=0;g<this.state.SMSDateSource.length;g++)j.push({value:this.state.SMSDateSource[g].id,label:this.state.SMSDateSource[g].title,children:[{value:this.state.SMSDateSource[g].id,label:this.state.SMSDateSource[g].content.content}]});for(var f=[],p=0;p<this.state.robotDateSource.length;p++)"text"===this.state.robotDateSource[p].content_format?f.push({value:this.state.robotDateSource[p].id,label:this.state.robotDateSource[p].title,children:[{value:this.state.robotDateSource[p].content.content,label:this.state.robotDateSource[p].content.content}]}):f.push({value:this.state.robotDateSource[p].id,label:this.state.robotDateSource[p].title,children:[{value:this.state.robotDateSource[p].content.text,label:this.state.robotDateSource[p].content.text}]});for(var m=[],O=0;O<this.state.noticeDateSource.length;O++)"text"===this.state.noticeDateSource[O].content_format?m.push({value:this.state.noticeDateSource[O].id,label:this.state.noticeDateSource[O].title,children:[{value:this.state.noticeDateSource[O].content.content,label:this.state.noticeDateSource[O].content.content}]}):m.push({value:this.state.noticeDateSource[O].id,label:this.state.noticeDateSource[O].title,children:[{value:this.state.noticeDateSource[O].content.text,label:this.state.noticeDateSource[O].content.text}]});for(var v=[],y=0;y<this.state.groupDateSource.length;y++)"text"===this.state.groupDateSource[y].content_format?v.push({value:this.state.groupDateSource[y].id,label:this.state.groupDateSource[y].title,children:[{value:this.state.groupDateSource[y].content.content,label:this.state.groupDateSource[y].content.content}]}):v.push({value:this.state.groupDateSource[y].id,label:this.state.groupDateSource[y].title,children:[{value:this.state.groupDateSource[y].content.text,label:this.state.groupDateSource[y].content.text}]});for(var S=[],w=0;w<this.state.recordDateSource.length;w++)S.push({value:this.state.recordDateSource[w].id,label:this.state.recordDateSource[w].title,children:[{value:this.state.recordDateSource[w].content.content,label:this.state.recordDateSource[w].content.content}]});return Object(x.jsx)(ze.a,{title:"\u7f16\u8f91",visible:a,onCancel:this.handleCancel,onOk:this.handleOk,destroyOnClose:!0,okText:"\u66f4\u65b0",width:"645px",bodyStyle:{margin:"50px 50px"},children:Object(x.jsxs)(We.a,Object(C.a)(Object(C.a)({},{labelCol:{sm:{span:4}},wrapperCol:{sm:{span:16}}}),{},{initialValues:Object(C.a)(Object(C.a)({},n),s),ref:this.editFormRef,children:[Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u540d\u79f0",name:"title",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a8\u9001\u540d\u79f0",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u7c7b\u578b",name:"style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400,height:40,borderRadius:5},className:"selectStyle",onChange:function(t){e.diff(t)},children:[Object(x.jsx)(i,{value:"mail",children:"\u90ae\u4ef6"}),Object(x.jsx)(i,{value:"sms",children:"\u77ed\u4fe1"}),Object(x.jsx)(i,{value:"ding_notice",children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(i,{value:"ding_group",children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(i,{value:"ding_robot",children:"\u9489\u9489\u673a\u5668\u4eba"}),Object(x.jsx)(i,{value:"ding_record",children:"\u9489\u9489\u5f85\u529e"})]})}),"mail"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u4ef6\u4eba",rules:[{required:!0}],name:"username",children:Object(x.jsx)(rt.a,{placeholder:"\u8bf7\u9009\u62e9\u53d1\u4ef6\u4eba",style:{width:400,height:40,borderRadius:5},className:"selectStyle",onFocus:this.onFocusUser,children:d})}),Object(x.jsx)(We.a.Item,{label:"\u6536\u4ef6\u4eba",name:"to",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"xxxx@ximalaya.com",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({cronChange:!0}),3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:u,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusMail,onChange:this.MailCopyChange})})]}),"sms"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u65b9",name:"to",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u65b9",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({cronChange:!0}),3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:j,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusSMS,onChange:this.SMSCopyChange})})})]}),"ding_notice"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u5bf9\u8c61",name:"is_at_all",rules:[{required:!0}],style:{minHeight:10},children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){console.log(t),e.setState({is_at_all:t})},className:"selectStyle",children:[Object(x.jsx)(i,{value:!0,disabled:!0,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(i,{value:!1,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),0==this.state.is_at_all&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({cronChange:!0}),3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:m,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusNotice})})})]}),"ding_group"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",name:"chat_id",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){e.setState({cronChange:!0}),3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:v,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusGroup})})})]}),"ding_robot"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",name:"webhook",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u5bc6\u94a5",name:"secret",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u94a5",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u5bf9\u8c61",name:"atflowState",rules:[{required:!0}],style:{minHeight:10},initialValue:this.state.atflowState,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",onChange:function(t){return e.setState({atflowState:t})},children:[Object(x.jsx)(i,{value:10,children:"\u4e0d@\u4efb\u4f55\u4eba"}),Object(x.jsx)(i,{value:11,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(i,{value:12,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),12==this.state.atflowState&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:f,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusRobot})})})]}),"ding_record"==this.state.styleBefore&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5f85\u529e\u65b9\u5f0f",name:"is_alone",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({recordFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(i,{value:!1,children:"\u534f\u4f5c\u5f85\u529e"}),Object(x.jsx)(i,{value:!0,children:"\u72ec\u7acb\u5f85\u529e"})]})}),!1===this.state.recordFlowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u6267\u884c\u8005",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u65b9",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53c2\u4e0e\u8005",name:"participant_id_list",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53c2\u4e0e\u8005",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u903e\u671f\u65f6\u95f4",name:"due_timedelta",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u903e\u671f\u65f6\u95f4",style:{width:400,height:40,borderRadius:5}})})]}),!0===this.state.recordFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6267\u884c\u8005",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u6267\u884c\u8005",style:{width:400,height:40,borderRadius:5}})})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send_style",rules:[{required:!0}],initialValue:o,children:Object(x.jsxs)(gt.a.Group,{onChange:function(t){3==t.target.value?e.setState({is_periodic_tasks:!0}):e.setState({is_periodic_tasks:!1})},children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"crontab_info",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],initialValue:111,children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",children:[Object(x.jsx)(i,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(i,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"www",rules:[{required:!0}],initialValue:[l,l],children:Object(x.jsx)(Et.a,{options:S,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusRecord})})})]})]}))})}}]),a}(n.Component),Qt=ze.a.confirm,Yt=(Me.a.TextArea,rt.a.Option),Xt=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null,position:"bottomRight"},current:"",visible:!1,visibleDetail:!1,flowState:"",styleFlowState:1,RadioFlowState:!0,atflowState:"",titleValue:"",tpl_id:"",cronValue:"",toWhoValue:"",theUserName:"",cc:"",bcc:"",webhook:"",is_at_all:!1,theUser2Name:"",is_run_now:!1,is_periodic_tasks:!1,mailDateSource:[],SMSDateSource:[],userDateSource:"",robotDateSource:[],groupDateSource:[],noticeDateSource:[],recordDateSource:[],detail:{tpl:{title:""},reason:"",data:{webhook:"",name:"",agent_id:"",chat_id:""}},editVisible:!1,transferVisible:!1,editLoading:!1,currentRowData:{id:""},addUserModalVisible:!1,addUserModalLoading:!1,myKey:"",filter_fields:{},searchText:"",searchedColumn:"",searchArr:{},searchData:{},choice:[],transferId:""},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){var n="";return n="style"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200,marginBottom:0},children:Object(x.jsx)(We.a.Item,{name:"search",style:{marginBottom:8,marginTop:5},children:Object(x.jsxs)(rt.a,{showSearch:!0,allowClear:!0,value:e.state.searchArr["".concat(t)]?e.state.searchArr["".concat(t)]:"",style:{width:188},placeholder:"\u641c\u7d22 ".concat(a),optionFilterProp:"children",onSelect:function(a){return e.handleSearch(a,t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(x.jsx)(Yt,{value:"ding_record",children:"\u9489\u9489\u5f85\u529e"}),Object(x.jsx)(Yt,{value:"ding_robot",children:"\u9489\u9489\u673a\u5668\u4eba"}),Object(x.jsx)(Yt,{value:"ding_group",children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(Yt,{value:"ding_notice",children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(Yt,{value:"mail",children:"\u90ae\u4ef6"}),Object(x.jsx)(Yt,{value:"sms",children:"\u77ed\u4fe1"})]})})}):"is_periodic_tasks"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200},children:Object(x.jsx)(We.a.Item,{name:"search",children:Object(x.jsxs)(gt.a.Group,{style:{display:"block"},onChange:function(a){e.state.searchArr[t]=a.target.value},children:[Object(x.jsx)(gt.a,{style:{display:"inline",margin:30},value:!0,children:"\u662f"}),Object(x.jsx)(gt.a,{style:{display:"inline"},value:!1,children:"\u5426"})]})})}):Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),{filterDropdown:Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[n,Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]}),filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return"style"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.styleEtoC(e.state.searchData[t])],autoEscape:!0,textToHighlight:e.styleEtoC(a)?e.styleEtoC(a).toString():""})}):e.styleEtoC(a):"is_periodic_tasks"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]?"\u662f":"\u5426"],autoEscape:!0,textToHighlight:a||a?"\u662f":"\u5426".toString()})}):a?"\u662f":"\u5426":e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]="style"===a?[t]:[t.target.value]},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.state.searchArr[a]=[],e.search()},e.columns=[{title:"\u63a8\u9001ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"uuid",dataIndex:"uuid",key:"uuid",align:"center",width:200},e.getColumnSearchProps("uuid","uuid")),Object(C.a)({title:"\u63a8\u9001\u540d\u79f0",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u63a8\u9001\u540d\u79f0")),Object(C.a)({title:"\u63a8\u9001\u7c7b\u578b",key:"style",dataIndex:"style",align:"center",width:150},e.getColumnSearchProps("style","\u63a8\u9001\u7c7b\u578b")),{title:"\u5468\u671f\u53d1\u9001",key:"is_periodic_tasks",dataIndex:"is_periodic_tasks",align:"center",width:120,render:function(e){return e?Object(x.jsx)(Dt.a,{style:{fontSize:"17px",color:"#0073E1 "}}):Object(x.jsx)(It.a,{style:{fontSize:"17px",color:"#B1B1B1 "}})}},{title:"\u63a8\u9001\u6b21\u6570",key:"count",dataIndex:"count",align:"center",width:100},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,fixed:"right",render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDetail(a,t)},children:"\u8be6\u60c5"}),Object(x.jsx)(h.b,{target:"_blank",to:"/task/history?id=".concat(t.id),children:Object(x.jsx)(Ae.a,{className:"handle-button",children:"\u5386\u53f2"})}),Object(x.jsx)(Ut.a,{overlay:Object(x.jsxs)(j.a,{children:[Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleSend(a,t)},children:"\u53d1\u9001"},"0"),Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"},"1"),Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"},"2"),Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleTransfer(a,t)},children:"\u8f6c\u8ba9"},"3")]}),children:Object(x.jsxs)(Ae.a,{className:"handle-button",onClick:function(e){return e.preventDefault()},children:["  ",Object(x.jsx)(Wt.a,{})]})})]})}}],e.cronExample=Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"https://cron.qqe2.com/ "}),Object(x.jsx)("p",{children:"https://tool.lu/crontab"}),Object(x.jsx)("p",{children:"https://mviess.de/sysadm/crontabmaker/index.php"})]}),e.formRef=i.a.createRef(),e.transFormRef=i.a.createRef(),e.onFocusMail=function(t){var a=Object(k.a)(e);P({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({mailDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusSMS=function(t){var a=Object(k.a)(e);Q({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({SMSDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusRobot=function(t){var a=Object(k.a)(e);ne({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({robotDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusGroup=function(t){var a=Object(k.a)(e);ce({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({groupDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusNotice=function(t){var a=Object(k.a)(e);he({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({noticeDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusRecord=function(t){var a=Object(k.a)(e);$({page:"1"}).then((function(e){0==e.code||200==e.code?a.setState({recordDateSource:e.data.results}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.onFocusUser=function(t){var a=Object(k.a)(e);W().then((function(e){0==e.code||200==e.code?a.setState({userDateSource:e.data}):Le.b.error(e.message)})).catch((function(e){Le.b.error(e)}))},e.MailCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.SMSCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.RobotCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.GroupCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.NoticeCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.RecordCopyChange=function(t,a){e.setState({tpl_id:a[0].value})},e.styleEtoC=function(e){return"ding_group"==e?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==e?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==e?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==e?"\u9489\u9489\u5f85\u529e":"mail"==e?"\u90ae\u4ef6":"sms"==e?"\u77ed\u4fe1":"tel"==e?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"},e.showModal=function(){e.setState({visible:!0,myKey:Math.random()})},e.handleCancel=function(t){e.formRef.current.resetFields(),e.setState({visible:!1})},e.handleEditOk=function(t,a){console.log("okk",a.username),e.setState({editVisible:!1});var n={title:a.title,tpl_id:a.www[0],style:a.style};switch(a.send_style){case 1:n=Object(C.a)(Object(C.a)({},n),{},{is_run_now:!1,is_periodic_tasks:!1});break;case 2:n=Object(C.a)(Object(C.a)({},n),{},{is_run_now:!0,is_periodic_tasks:!1});break;case 3:n=Object(C.a)(Object(C.a)({},n),{},{is_run_now:!1,is_periodic_tasks:!0})}switch(a.style){case"mail":n=Object(C.a)(Object(C.a)({},n),{},{data:{to:a.to,username:a.username,cc:"",bcc:""}});break;case"sms":n=Object(C.a)(Object(C.a)({},n),{},{data:{to:a.to}});break;case"ding_notice":n=Object(C.a)(Object(C.a)({},n),{},{data:{is_at_all:a.is_at_all,agent_id:"12479228",user_id_list:a.user_id_list}});break;case"ding_group":n=Object(C.a)(Object(C.a)({},n),{},{data:{is_at_all:a.is_at_all,chat_id:a.chat_id,user_id_list:a.user_id_list}});break;case"ding_robot":n=Object(C.a)(Object(C.a)({},n),{},{data:{is_at_all:11==a.atflowState,webhook:a.webhook,secret:a.secret,user_id_list:12==a.atflowState?a.user_id_list:""}});break;case"ding_record":var i={};!1===a.is_alone&&(i={participant_id_list:a.participant_id_list,due_timedelta:a.due_timedelta}),n=Object(C.a)(Object(C.a)({},n),{},{data:Object(C.a)({user_id_list:a.user_id_list,is_alone:a.is_alone},i)})}console.log(n),Se(t,n).then((function(t){console.log("response:",t),e.setState({editVisible:!1}),Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.getRefresh()})).catch((function(e){Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!"),console.log(e)}))},e.handleEditCancel=function(t){e.setState({editVisible:!1})},e.handleEdit=function(t,a){e.state.currentRowData=Object.assign({},a),e.setState({editVisible:!0}),console.log(e.state.currentRowData)},e.handleTransfer=function(t,a){e.setState({transferVisible:!0,transferId:a.id})},e.handleTransferOk=function(){var t=e.state.transferId;e.transFormRef.current.validateFields().then((function(a){console.log(a),Ce(t,a).then((function(t){0==t.code?(Le.b.success("\u8f6c\u8ba9\u6210\u529f\uff01"),e.transFormRef.current.resetFields(),e.setState({transferVisible:!1}),e.getRefresh()):Le.b.error(t.message)}))})).catch((function(e){console.log(e)}))},e.onFinish=function(){e.formRef.current.validateFields().then((function(t){console.log(t);var a={};if(11==e.state.atflowState&&e.setState({is_at_all:!0}),1===e.state.flowState)a={title:e.state.titleValue,data:{to:e.state.toWhoValue,username:e.state.theUserName,cc:e.state.cc,bcc:e.state.bcc},tpl_id:e.state.tpl_id,style:"mail",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks};else if(2===e.state.flowState)a={title:e.state.titleValue,data:{to:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"sms",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks};else if(3===e.state.flowState)a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,agent_id:"12479228",user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_notice",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks};else if(4===e.state.flowState)a={title:e.state.titleValue,data:{is_at_all:e.state.is_at_all,chat_id:e.state.theUser2Name,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_group",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks};else if(5===e.state.flowState)a={title:e.state.titleValue,data:{webhook:e.state.webhook,secret:t.secret,is_at_all:e.state.is_at_all,user_id_list:e.state.toWhoValue},tpl_id:e.state.tpl_id,style:"ding_robot",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks};else if(6===e.state.flowState){var n={};!1===t.is_alone&&(n={participant_id_list:t.participant_id_list,due_timedelta:t.due_timedelta}),a={title:e.state.titleValue,data:Object(C.a)({user_id_list:t.user_id_list,is_alone:t.is_alone},n),tpl_id:e.state.tpl_id,style:"ding_record",is_run_now:e.state.is_run_now,crontab_info:e.state.cronValue,is_periodic_tasks:e.state.is_periodic_tasks}}fe(a),e.formRef.current.resetFields(),e.getRefresh()})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.handleDelete=function(t,a){var n=Object(k.a)(e);Qt({title:"\u5220\u9664\u63a8\u9001",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u5220\u9664".concat(a.title,"\u5417\uff1f"),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.handleSend=function(t,a){var n=Object(k.a)(e);Qt({title:"",icon:Object(x.jsx)(Je.a,{}),content:"\u786e\u8ba4\u8981\u53d1\u9001".concat(a.title,"\u5417\uff1f"),okText:"\u53d1\u9001",cancelText:"\u53d6\u6d88",onOk:function(){n.sendAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){ve(a.id).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.sendAction=function(t,a){we(a.id).then((function(t){0==t.code?(Le.b.success("\u53d1\u9001\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleDetail=function(t,a){ye(a.id).then((function(t){0==t.code?(e.setState({visibleDetail:!0,detail:t.data}),console.log(t)):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;Oe({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){if(e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields}),0!==e.state.filter_fields.length){var a={};e.state.filter_fields.map((function(e){return a[e.value]=[],e.name}));0===Object.keys(e.state.searchArr).length&&(e.state.searchArr=a)}e.state.choice=e.state.filter_fields[2].choice,console.log(e.state.searchArr)}))}},{key:"handleTitleChange",value:function(e){this.setState({titleValue:e.target.value})}},{key:"handleToWhoChange",value:function(e){this.setState({toWhoValue:e.target.value})}},{key:"handleUserChange",value:function(e){this.setState({theUserName:e})}},{key:"handleUser2Change",value:function(e){this.setState({theUser2Name:e.target.value})}},{key:"handleWebhookChange",value:function(e){this.setState({webhook:e.target.value})}},{key:"handleCronChange",value:function(e){console.log(e),this.setState({cronValue:e.target.value})}},{key:"handleRadioChange",value:function(e){1==e.target.value&&this.setState({is_periodic_tasks:!1,is_run_now:!1}),2==e.target.value&&this.setState({is_periodic_tasks:!1,is_run_now:!0}),3==e.target.value&&this.setState({is_periodic_tasks:!0,is_run_now:!1})}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.titleValue,n=t.toWhoValue,i=t.webhook,s=(t.RadioFlowState,t.cronValue),r=t.theUser2Name,c=t.myKey,l=[],o=0;o<this.state.userDateSource.length;o++)l.push(Object(x.jsx)(Yt,Object(At.a)({children:!0},"children",this.state.userDateSource[o].name),this.state.userDateSource[o].value));for(var d=[],h=0;h<this.state.mailDateSource.length;h++)d.push({value:this.state.mailDateSource[h].id,label:this.state.mailDateSource[h].title,children:[{value:this.state.mailDateSource[h].content.content,label:this.state.mailDateSource[h].content.content}]});for(var u=[],b=0;b<this.state.SMSDateSource.length;b++)u.push({value:this.state.SMSDateSource[b].id,label:this.state.SMSDateSource[b].title,children:[{value:this.state.SMSDateSource[b].content.content,label:this.state.SMSDateSource[b].content.content}]});for(var j=[],g=0;g<this.state.robotDateSource.length;g++)"text"===this.state.robotDateSource[g].content_format?j.push({value:this.state.robotDateSource[g].id,label:this.state.robotDateSource[g].title,children:[{value:this.state.robotDateSource[g].content.content,label:this.state.robotDateSource[g].content.content}]}):j.push({value:this.state.robotDateSource[g].id,label:this.state.robotDateSource[g].title,children:[{value:this.state.robotDateSource[g].content.text,label:this.state.robotDateSource[g].content.text}]});for(var f=[],p=0;p<this.state.noticeDateSource.length;p++)"text"===this.state.noticeDateSource[p].content_format?f.push({value:this.state.noticeDateSource[p].id,label:this.state.noticeDateSource[p].title,children:[{value:this.state.noticeDateSource[p].content.content,label:this.state.noticeDateSource[p].content.content}]}):f.push({value:this.state.noticeDateSource[p].id,label:this.state.noticeDateSource[p].title,children:[{value:this.state.noticeDateSource[p].content.text,label:this.state.noticeDateSource[p].content.text}]});for(var m=[],O=0;O<this.state.groupDateSource.length;O++)"text"===this.state.groupDateSource[O].content_format?m.push({value:this.state.groupDateSource[O].id,label:this.state.groupDateSource[O].title,children:[{value:this.state.groupDateSource[O].content.content,label:this.state.groupDateSource[O].content.content}]}):m.push({value:this.state.groupDateSource[O].id,label:this.state.groupDateSource[O].title,children:[{value:this.state.groupDateSource[O].content.text,label:this.state.groupDateSource[O].content.text}]});for(var v=[],y=0;y<this.state.recordDateSource.length;y++)v.push({value:this.state.recordDateSource[y].id,label:this.state.recordDateSource[y].title,children:[{value:this.state.recordDateSource[y].content.content,label:this.state.recordDateSource[y].content.content}]});return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(Tt.a,{}),"  \u63a8\u9001\u4efb\u52a1"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)",x:"100%"}})]}),Object(x.jsx)(ze.a,{title:"\u65b0\u5efa\u63a8\u9001",width:"645px",visible:this.state.visible,onOk:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:"\u6267\u884c",cancelText:"\u53d6\u6d88",bodyStyle:{height:"580px",overflowY:"auto",marginLeft:"45px"},destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",onFinish:this.onFinish,ref:this.formRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u540d\u79f0",name:"title",rules:[{required:!0,validator:function(e,t,n){a?n():n("\u8bf7\u8f93\u5165\u63a8\u9001\u540d\u79f0")}}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a8\u9001\u540d\u79f0",value:a,onChange:this.handleTitleChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u63a8\u9001\u7c7b\u578b",name:"style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({flowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:1,children:"\u90ae\u4ef6"}),Object(x.jsx)(Yt,{value:2,children:"\u77ed\u4fe1"}),Object(x.jsx)(Yt,{value:3,children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(Yt,{value:4,children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(Yt,{value:5,children:"\u9489\u9489\u673a\u5668\u4eba"}),Object(x.jsx)(Yt,{value:6,children:"\u9489\u9489\u5f85\u529e"})]})}),"1"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u4ef6\u4eba",name:"mail-1",rules:[{required:!0}],children:Object(x.jsx)(rt.a,{placeholder:"\u8bf7\u9009\u62e9\u53d1\u4ef6\u4eba",style:{width:400,height:40,borderRadius:5},onChange:this.handleUserChange.bind(this),className:"selectStyle",onFocus:this.onFocusUser,children:l})}),Object(x.jsx)(We.a.Item,{label:"\u6536\u4ef6\u4eba",name:"mail-3",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"xxxx@ximalaya.com",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"xxx",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"cron",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsxs)(tt.a,{style:{marginBottom:24,marginTop:-24},children:[Object(x.jsx)(at.a,{sm:4}),Object(x.jsx)(at.a,{sm:20,children:Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})})]})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"mail-6",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:d,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusMail,onChange:this.MailCopyChange})})})]}),"2"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u65b9",name:"receiver",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u65b9",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send-style",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"rules",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:u,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusSMS,onChange:this.SMSCopyChange})})})]}),"3"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u5bf9\u8c61",name:"receiver",rules:[{required:!0}],style:{minHeight:10},children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",onChange:function(t){e.setState({atflowState:t})},children:[Object(x.jsx)(Yt,{value:11,disabled:!0,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(Yt,{value:12,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),12==this.state.atflowState&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",name:"whobeat",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send-style",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"rules",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:f,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusNotice,onChange:this.NoticeCopyChange})})})]}),"4"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",name:"theUser2Name",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",value:r,onChange:this.handleUser2Change.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"handleRadio",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"rule",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:m,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusGroup,onChange:this.GroupCopyChange})})})]}),"5"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9",name:"theUser2Name",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u9001\u65b9",value:i,onChange:this.handleWebhookChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u5bc6\u94a5",name:"secret",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u94a5",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u5bf9\u8c61",name:"send-object",rules:[{required:!0}],style:{minHeight:10},children:Object(x.jsxs)(rt.a,{style:{width:400},className:"selectStyle",onChange:function(t){e.setState({atflowState:t})},children:[Object(x.jsx)(Yt,{value:10,children:"\u4e0d@\u4efb\u4f55\u4eba"}),Object(x.jsx)(Yt,{value:11,children:"@\u6240\u6709\u4eba"}),Object(x.jsx)(Yt,{value:12,children:"@\u6307\u5b9a\u7684\u4eba"})]})}),12==this.state.atflowState&&Object(x.jsx)(We.a.Item,{label:"\u88ab@\u7684\u4eba",name:"whobeat",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",value:n,onChange:this.handleToWhoChange.bind(this),style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send-style",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"rules",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:j,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusRobot,onChange:this.RobotCopyChange})})})]}),"6"==this.state.flowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u5f85\u529e\u65b9\u5f0f",name:"is_alone",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({recordFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:!1,children:"\u534f\u4f5c\u5f85\u529e"}),Object(x.jsx)(Yt,{value:!0,children:"\u72ec\u7acb\u5f85\u529e"})]})}),!1===this.state.recordFlowState&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(We.a.Item,{label:"\u6267\u884c\u8005",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u65b9",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u53c2\u4e0e\u8005",name:"participant_id_list",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53c2\u4e0e\u8005",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u903e\u671f\u65f6\u95f4",name:"due_timedelta",children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u903e\u671f\u65f6\u95f4",style:{width:400,height:40,borderRadius:5}})})]}),!0===this.state.recordFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6267\u884c\u8005",name:"user_id_list",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u6267\u884c\u8005",style:{width:400,height:40,borderRadius:5}})})}),Object(x.jsx)(We.a.Item,{label:"\u53d1\u9001\u65b9\u5f0f",name:"send-style",rules:[{required:!0}],children:Object(x.jsxs)(gt.a.Group,{onChange:this.handleRadioChange.bind(this),children:[Object(x.jsx)(gt.a,{value:1,children:"\u4ec5\u521b\u5efa"}),Object(x.jsx)(gt.a,{value:2,children:"\u521b\u5efa\u5e76\u53d1\u9001"}),Object(x.jsx)(gt.a,{value:3,children:"\u5468\u671f\u53d1\u9001"})]})}),1==this.state.is_periodic_tasks&&Object(x.jsxs)(We.a.Item,{label:"\u5b9a\u65f6\u89c4\u5219",name:"rules",rules:[{required:!0}],children:[Object(x.jsx)(Me.a,{placeholder:"Cron \u8868\u8fbe\u5f0f",value:s,onChange:this.handleCronChange.bind(this),style:{width:400,height:40,borderRadius:5}}),Object(x.jsx)(Pe.a,{className:"shili",placement:"right",content:this.cronExample,trigger:"click",children:Object(x.jsx)("span",{children:"\u793a\u4f8b"})})]}),Object(x.jsx)(We.a.Item,{label:"\u7f16\u8f91\u65b9\u5f0f",name:"edit-style",rules:[{required:!0}],children:Object(x.jsxs)(rt.a,{style:{width:400},onChange:function(t){e.setState({styleFlowState:t})},className:"selectStyle",children:[Object(x.jsx)(Yt,{value:111,children:"\u6a21\u7248\u5bfc\u5165"}),Object(x.jsx)(Yt,{value:112,disabled:!0,children:"\u624b\u52a8\u8f93\u5165"})]})}),"111"==this.state.styleFlowState&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(We.a.Item,{label:"\u6b63\u6587",name:"mbzw",rules:[{required:!0}],children:Object(x.jsx)(Et.a,{options:v,style:{width:400},placeholder:"\u8bf7\u9009\u62e9\u6b63\u6587",notFoundContent:"\u6682\u65e0\u6a21\u677f",onFocus:this.onFocusRecord,onChange:this.RecordCopyChange})})})]})]})},c),Object(x.jsxs)(ze.a,{title:"\u8be6\u60c5",width:"645px",className:"Detail",visible:this.state.visibleDetail,onCancel:function(t){e.setState({visibleDetail:!1})},maskStyle:{background:"rgba(217,218,217,0.5)"},footer:[],bodyStyle:{overflowY:"auto",marginLeft:"45px",padding:"15px 10% 80px 10%"},children:[Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u540d\u79f0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u63a8\u9001\u7c7b\u578b\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==this.state.detail.style?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==this.state.detail.style?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==this.state.detail.style?"\u9489\u9489\u5f85\u529e":"mail"==this.state.detail.style?"\u90ae\u4ef6":"sms"==this.state.detail.style?"\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677fid\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl_id}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u6a21\u677f\u6807\u9898\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.tpl.title}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" uuid:"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.uuid}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u53d1\u4ef6\u65b9\uff1a"}),Object(x.jsx)("span",{className:"ans",children:"ding_group"==this.state.detail.style?this.state.detail.data.chat_id:"ding_robot"==this.state.detail.style?this.state.detail.data.webhook:"ding_notice"==this.state.detail.style?this.state.detail.data.agent_id:"mail"==this.state.detail.style?this.state.detail.data.name:"sms"==this.state.detail.style?"\u7ba1\u7406\u5458\u77ed\u4fe1":"tel"==this.state.detail.style?"\u7ba1\u7406\u5458\u7535\u8bdd":"\u7ba1\u7406\u5458"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\uff1a"}),Object(x.jsx)("span",{className:"ans",children:1e3==this.state.detail.status?"\u5b8c\u6210":999==this.state.detail.status?"\u5931\u8d25":300==this.state.detail.status?"\u6267\u884c\u4e2d":100==this.state.detail.status?"\u7b49\u5f85\u4e2d":"\u751f\u6548"}),Object(x.jsx)("br",{}),Object(x.jsx)("span",{className:"title",children:" \u72b6\u6001\u539f\u56e0\uff1a"}),Object(x.jsx)("span",{className:"ans",children:this.state.detail.reason}),Object(x.jsx)("br",{})]}),Object(x.jsx)(Jt,{currentRowData:this.state.currentRowData,visible:this.state.editVisible,onCancel:this.handleEditCancel,onOk:this.handleEditOk}),Object(x.jsx)(ze.a,{title:"\u8f6c\u8ba9",width:"645px",visible:this.state.transferVisible,onCancel:function(){e.setState({transferVisible:!1})},onOk:this.handleTransferOk,maskStyle:{background:"rgba(217,218,217,0.5)"},bodyStyle:{height:"208px"},children:Object(x.jsx)(We.a,{ref:this.transFormRef,style:{margin:"65px 0 0 50px"},children:Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u4eba",name:"ding_talk_id",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",style:{width:"431px",height:"40px",border:"1px solid #DCDFE6",borderRadius:"4px"}})})})})]})}},{key:"getRefresh",value:function(){var e=this,t=this;Oe(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),Zt=a(513),$t=a(179),ea=a(98),ta=rt.a.Option,aa=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={isEdit:!1,visible:!1,currentRowData:{},tasksAll:[]},e.editRef=i.a.createRef(),e.styleEtoC=function(e){return"ding_group"==e?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==e?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==e?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==e?"\u9489\u9489\u5f85\u529e":"mail"==e?"\u90ae\u4ef6":"sms"==e?"\u77ed\u4fe1":"tel"==e?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"},e.showModal=function(t,a){t&&e.setState({currentRowData:a,isEdit:!0,myKey:Math.random()}),e.setState({visible:!0})},e.handleCancel=function(){e.setState({visible:!1,currentRowData:{}},(function(){e.editRef.current.resetFields()}))},e.onFinish=function(){var t=Object(k.a)(e);e.editRef.current.validateFields().then((function(a){_e(a).then((function(){t.editRef.current.resetFields(),e.props.onFinish()}))})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e.editScene=function(){e.editRef.current.validateFields().then((function(t){t=Object(C.a)({},t),De(e.state.currentRowData.id,t).then((function(t){Le.b.success("\u7f16\u8f91\u6210\u529f!"),e.props.onFinish()})).catch((function(e){console.log(e),Le.b.success("\u7f16\u8f91\u5931\u8d25,\u8bf7\u91cd\u8bd5!")}))})).catch((function(e){console.log(e)})),e.setState({visible:!1})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.onRef(this),Oe({page_size:250}).then((function(t){console.log(t),0==t.code||200==t.code?e.setState({tasksAll:t.data.results}):Le.b.error(t.message)})).catch((function(e){Le.b.error(e)}))}},{key:"render",value:function(){for(var e=this.state.tasksAll,t=[],a=0;a<e.length;a++)t.push(Object(x.jsxs)(ta,{value:e[a].id,title:this.styleEtoC(e[a].style),children:[e[a].id,":",e[a].title]}));return Object(x.jsx)(ze.a,{title:this.state.isEdit?"\u4fee\u6539\u573a\u666f":"\u65b0\u5efa\u573a\u666f",width:"645px",visible:this.state.visible,onOk:this.state.isEdit?this.editScene:this.onFinish,onCancel:this.handleCancel,maskStyle:{background:"rgba(217,218,217,0.5)"},okText:this.state.isEdit?"\u4fee\u6539":"\u65b0\u5efa",cancelText:"\u53d6\u6d88",bodyStyle:{height:"380px",overflowY:"auto",marginLeft:"45px"},destroyOnClose:!0,children:Object(x.jsxs)(We.a,{className:"addModel",name:"basic",ref:this.editRef,labelCol:{span:4},children:[Object(x.jsx)(We.a.Item,{label:"\u540d\u79f0",name:"title",rules:[{required:!0}],initialValue:this.state.currentRowData.title,children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u540d\u79f0",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u63cf\u8ff0",name:"message",rules:[{required:!0}],initialValue:this.state.currentRowData.message,children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u63cf\u8ff0",style:{width:400,height:40,borderRadius:5}})}),Object(x.jsx)(We.a.Item,{label:"\u6e20\u9053",name:"tasks",rules:[{required:!0}],initialValue:this.state.currentRowData.tasks,children:Object(x.jsx)(rt.a,{className:"selectStyleMulti",mode:"multiple",allowClear:!0,placeholder:"\u8bf7\u9009\u62e9\u6e20\u9053",children:t})}),Object(x.jsx)(We.a.Item,{label:"\u53d8\u66f4\u901a\u77e5\u4eba",name:"change_recipient",rules:[{required:!0}],initialValue:this.state.currentRowData.change_recipient,children:Object(x.jsx)(Me.a,{placeholder:"\u8bf7\u8f93\u5165\u53d8\u66f4\u901a\u77e5\u4eba",style:{width:400,height:40,borderRadius:5}})})]})},this.state.myKey)}}]),a}(n.Component),na=ze.a.confirm,ia=(Me.a.TextArea,rt.a.Option),sa=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={dataSource:[],pagination:{current:1,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:null,position:"bottomRight"},current:"",visible:!1,visibleDetail:!1,detail:[{tpl:{variable:[{}]}}],editVisible:!1,transferVisible:!1,editLoading:!1,currentRowData:{id:""},addUserModalVisible:!1,addUserModalLoading:!1,myKey:"",filter_fields:{},searchText:"",searchedColumn:"",searchArr:{},searchData:{},choice:[],transferId:"",delete_task:!1},e.pageChange=function(t,a){e.state.current=t,e.state.pageSize=a,e.getRefresh()},e.searchInput=[],e.getColumnSearchProps=function(t,a){var n="";return n="style"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200,marginBottom:0},children:Object(x.jsx)(We.a.Item,{name:"search",style:{marginBottom:8,marginTop:5},children:Object(x.jsxs)(rt.a,{showSearch:!0,allowClear:!0,value:e.state.searchArr["".concat(t)]?e.state.searchArr["".concat(t)]:"",style:{width:188},placeholder:"\u641c\u7d22 ".concat(a),optionFilterProp:"children",onSelect:function(a){return e.handleSearch(a,t)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:[Object(x.jsx)(ia,{value:"ding_record",children:"\u9489\u9489\u5f85\u529e"}),Object(x.jsx)(ia,{value:"ding_robot",children:"\u9489\u9489\u673a\u5668\u4eba"}),Object(x.jsx)(ia,{value:"ding_group",children:"\u9489\u9489\u7fa4\u901a\u77e5"}),Object(x.jsx)(ia,{value:"ding_notice",children:"\u9489\u9489\u5de5\u4f5c\u901a\u544a"}),Object(x.jsx)(ia,{value:"mail",children:"\u90ae\u4ef6"}),Object(x.jsx)(ia,{value:"sms",children:"\u77ed\u4fe1"})]})})}):"is_periodic_tasks"===t?Object(x.jsx)(We.a,{ref:function(a){e.searchInput["".concat(t)]=a},style:{width:200},children:Object(x.jsx)(We.a.Item,{name:"search",children:Object(x.jsxs)(gt.a.Group,{style:{display:"block"},onChange:function(a){e.state.searchArr[t]=a.target.value},children:[Object(x.jsx)(gt.a,{style:{display:"inline",margin:30},value:!0,children:"\u662f"}),Object(x.jsx)(gt.a,{style:{display:"inline"},value:!1,children:"\u5426"})]})})}):Object(x.jsx)(Me.a,{ref:function(a){e.searchInput[t]=a},prefix:Object(x.jsx)(He.a,{style:{color:"#B1B1B1",fontSize:"12px"}}),placeholder:"\u641c\u7d22 ".concat(a),onChange:function(a){return e.handleSearch(a,t)},onPressEnter:function(a){return e.handleSearch(a,t)},style:{marginBottom:8,marginTop:5}}),{filterDropdown:Object(x.jsxs)("div",{style:{width:" 200px",height:"97px",padding:8,boxShadow:" 0px 2px 4px 1px rgba(0,0,0,0.5)",borderRadius:"5px"},children:[n,Object(x.jsxs)(qe.b,{children:[Object(x.jsx)(Ae.a,{onClick:function(a){return e.handleReset(a,t)},size:"small",style:{width:"67px",height:"21px",background:"##FFFFFF",border:"1px solid #DADADA",borderRadius:"5px",fontSize:"12px",margin:"12px"},children:"\u91cd\u7f6e"}),Object(x.jsx)(Ae.a,{type:"primary",onClick:function(){return e.search()},icon:Object(x.jsx)(He.a,{}),size:"small",style:{width:"67px",height:"21px",background:"#40404C",border:"1px solid #40404C",borderRadius:"5px",fontSize:"12px",color:"#FFFFFF"},children:"\u641c\u7d22"})]})]}),filterIcon:Object(x.jsx)(He.a,{style:{color:"#D8D8D8"}}),render:function(a){return"style"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.styleEtoC(e.state.searchData[t])],autoEscape:!0,textToHighlight:e.styleEtoC(a)?e.styleEtoC(a).toString():""})}):e.styleEtoC(a):"is_periodic_tasks"===t?e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]?"\u662f":"\u5426"],autoEscape:!0,textToHighlight:a||a?"\u662f":"\u5426".toString()})}):a?"\u662f":"\u5426":e.state.searchData.hasOwnProperty(t)?Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Te.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[e.state.searchData[t]],autoEscape:!0,textToHighlight:a?a.toString():""})}):Object(x.jsx)(x.Fragment,{children:a})}}},e.handleSearch=function(t,a){e.state.searchArr[a]="style"===a?[t]:[t.target.value]},e.search=function(){var t=e.state.searchArr,a={};for(var n in e.state.searchData={},t)a["".concat(n)]=t[n].toString();for(var i in a)a[i]&&(e.state.searchData[i]=a[i]);console.log(e.state.searchData),e.getRefresh()},e.handleReset=function(t,a){e.state.searchArr[a]=[],e.search()},e.onRef=function(t){e.child=t},e.columns=[{title:"\u63a8\u9001ID",dataIndex:"id",key:"id",align:"center",width:150},Object(C.a)({title:"uuid",dataIndex:"uuid",key:"uuid",align:"center",width:200},e.getColumnSearchProps("uuid","uuid")),Object(C.a)({title:"\u63a8\u9001\u540d\u79f0",key:"title",dataIndex:"title",align:"center",width:200},e.getColumnSearchProps("title","\u63a8\u9001\u540d\u79f0")),{title:"\u6e20\u9053\u6570\u91cf",key:"task_count",dataIndex:"task_count",align:"center",width:100},{title:"\u64cd\u4f5c",key:"handle",align:"center",width:200,fixed:"right",render:function(t){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleDetail(a,t)},children:"\u8be6\u60c5"}),Object(x.jsx)(Ae.a,{className:"handle-button",onClick:function(a){return e.handleEdit(a,t)},children:"\u7f16\u8f91"}),Object(x.jsx)(Ut.a,{overlay:Object(x.jsxs)(j.a,{children:[Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleDelete(a,t)},children:"\u5220\u9664"},"2"),Object(x.jsx)(j.a.Item,{onClick:function(a){return e.handleTransfer(a,t)},children:"\u8f6c\u8ba9"},"3")]}),children:Object(x.jsxs)(Ae.a,{className:"handle-button",onClick:function(e){return e.preventDefault()},children:["  ",Object(x.jsx)(Wt.a,{})]})})]})}}],e.detailColumns=[{title:"ID",dataIndex:"id",key:"id",align:"center",width:50},{title:"uuid",dataIndex:"uuid",key:"uuid",align:"center",textWrap:"word-break",ellipsis:!0,width:100,render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e,children:e})})}},{title:"\u63a8\u9001\u540d\u79f0",key:"title",dataIndex:"title",align:"center",width:150,textWrap:"word-break",ellipsis:!0,render:function(e){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e,children:e})})}},{title:"\u63a8\u9001\u7c7b\u578b",key:"style",dataIndex:"style",align:"center",width:100,render:function(t){return Object(x.jsx)("div",{children:Object(x.jsx)(Ee.a,{placement:"topLeft",title:e.styleEtoC(t),children:e.styleEtoC(t)})})}},{title:"\u63a8\u9001\u6b21\u6570",key:"count",dataIndex:"count",align:"center",width:100},{title:"\u53c2\u6570\u53d8\u91cf",key:"tpl",dataIndex:"tpl",align:"center",width:100,textWrap:"word-break",ellipsis:!0,render:function(t){return Object(x.jsx)(Ee.a,{placement:"left",overlayClassName:"tplDetail",title:t.variable.map((function(t){return Object(x.jsxs)("div",{children:[" ",Object.keys(t).map((function(a){return Object(x.jsxs)("span",{children:[" ",Object(x.jsx)("b",{children:e.variableEtoC(a)}),": ",t[a]," ",Object(x.jsx)("br",{})]})}))," ",Object(x.jsx)("br",{})]})})),children:t.variable.map((function(e){return"".concat(e.name,"  ")}))})}}],e.formRef=i.a.createRef(),e.transFormRef=i.a.createRef(),e.variableEtoC=function(e){return"name"==e?"\u53c2\u6570\u53d8\u91cf":"desc"==e?"\u5907\u6ce8":"\u53c2\u6570\u793a\u4f8b"},e.styleEtoC=function(e){return"ding_group"==e?"\u9489\u9489\u7fa4\u901a\u77e5":"ding_robot"==e?"\u9489\u9489\u673a\u5668\u4eba":"ding_notice"==e?"\u9489\u9489\u5de5\u4f5c\u901a\u544a":"ding_record"==e?"\u9489\u9489\u5f85\u529e":"mail"==e?"\u90ae\u4ef6":"sms"==e?"\u77ed\u4fe1":"tel"==e?"\u7535\u8bdd":"\u672a\u77e5\u7c7b\u578b"},e.showModal=function(){e.child.showModal(0)},e.handleEdit=function(t,a){e.child.showModal(1,a)},e.handleTransfer=function(t,a){e.setState({transferVisible:!0,transferId:a.id})},e.handleTransferOk=function(){var t=e.state.transferId;e.transFormRef.current.validateFields().then((function(a){console.log(a),Ie(t,a).then((function(t){0==t.code?(Le.b.success("\u8f6c\u8ba9\u6210\u529f\uff01"),e.transFormRef.current.resetFields(),e.setState({transferVisible:!1}),e.getRefresh()):Le.b.error(t.message)}))})).catch((function(e){console.log(e)}))},e.onFinish=function(){e.getRefresh()},e.handleDelete=function(t,a){var n=Object(k.a)(e);na({title:"\u5220\u9664\u63a8\u9001",icon:Object(x.jsx)(Je.a,{}),content:Object(x.jsxs)("div",{children:["\u8bf7\u9009\u62e9\u662f\u5426\u540c\u65f6\u5220\u9664\u6240\u6709\u4efb\u52a1: ",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)(Zt.a,{checkedChildren:Object(x.jsx)($t.a,{}),unCheckedChildren:Object(x.jsx)(ea.a,{}),onChange:function(t){return e.setState({delete_task:t})},style:{margin:"0 auto"}})]}),okText:"\u5220\u9664",cancelText:"\u53d6\u6d88",onOk:function(){n.deleteAction(t.domEvent,a)},onCancel:function(){console.log("Cancel")}})},e.deleteAction=function(t,a){Re(a.id,{delete_task:e.state.delete_task}).then((function(t){0==t.code?(Le.b.success("\u5220\u9664\u6210\u529f\uff01"),e.getRefresh()):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e.handleDetail=function(t,a){Fe(a.id).then((function(t){0==t.code?e.setState({visibleDetail:!0,detail:t.data.task_details}):Le.b.error(t.message)})).catch((function(e){console.log(e),Le.b.error(e.message)}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;ke({page:this.state.pagination.current,page_size:this.state.pagination.pageSize}).then((function(t){e.setState({dataSource:t.data.results,pagination:{current:t.data.page,pageSize:t.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:t.data.total,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},onChange:e.pageChange,position:"bottomRight"},filter_fields:t.data.filter_fields})}))}},{key:"render",value:function(){var e=this,t=this.state;t.titleValue,t.toWhoValue,t.webhook,t.RadioFlowState,t.cronValue,t.theUser2Name,t.myKey;return Object(x.jsxs)("div",{className:"app-container",children:[Object(x.jsxs)(Be.a,{children:[Object(x.jsx)(Tt.a,{}),"  \u573a\u666f\u63a8\u9001"]}),Object(x.jsxs)("div",{style:{position:"relative"},children:[Object(x.jsx)("div",{style:{position:"absolute",left:35,top:37,zIndex:1},children:Object(x.jsx)(Qe.a,{style:{fontSize:"15px",color:"#000000"},onClick:this.showModal})}),Object(x.jsx)(Ue.a,{columns:this.columns,dataSource:this.state.dataSource,pagination:this.state.pagination,scroll:{y:"calc(100vh - 280px)",x:"100%"}})]}),Object(x.jsx)(ze.a,{title:"\u8be6\u60c5",width:"800px",visible:this.state.visibleDetail,onCancel:function(t){e.setState({visibleDetail:!1})},maskStyle:{background:"rgba(217,218,217,0.5)"},footer:[],bodyStyle:{overflowY:"auto"},children:Object(x.jsx)(Ue.a,{columns:this.detailColumns,dataSource:this.state.detail,scroll:{y:"calc(100vh - 280px)",x:"100%"}})}),Object(x.jsx)(aa,{onFinish:this.onFinish,onRef:this.onRef}),Object(x.jsx)(ze.a,{title:"\u8f6c\u8ba9",width:"645px",visible:this.state.transferVisible,onCancel:function(){e.setState({transferVisible:!1})},onOk:this.handleTransferOk,maskStyle:{background:"rgba(217,218,217,0.5)"},bodyStyle:{height:"208px"},children:Object(x.jsx)(We.a,{ref:this.transFormRef,style:{margin:"65px 0 0 50px"},children:Object(x.jsx)(We.a.Item,{label:"\u63a5\u6536\u4eba",name:"ding_talk_id",rules:[{required:!0}],children:Object(x.jsx)(Me.a,{placeholder:"\u5de5\u53f7",style:{width:"431px",height:"40px",border:"1px solid #DCDFE6",borderRadius:"4px"}})})})})]})}},{key:"getRefresh",value:function(){var e=this,t=this;ke(Object(C.a)({page:this.state.current,page_size:this.state.pageSize},this.state.searchData)).then((function(a){0==a.code||200==a.code?t.setState({dataSource:a.data.results,pagination:{current:a.data.page,pageSize:a.data.page_size,showSizeChanger:!0,showQuickJumper:!0,total:a.data.total,onChange:e.pageChange,showTotal:function(e){return"\u5171\u52a0\u8f7d ".concat(e," \u4e2a")},position:"bottomRight"}}):Le.b.error(a.message)})).catch((function(e){Le.b.error(e)}))}}]),a}(n.Component),ra=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsx)(h.a,{children:Object(x.jsx)(S,{children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"/my/mailbox",component:st}),Object(x.jsx)(u.a,{exact:!0,path:"/my/SMS",component:ht}),Object(x.jsx)(u.a,{exact:!0,path:"/my/dingdingRecord",component:jt}),Object(x.jsx)(u.a,{exact:!0,path:"/my/dingdingRobot",component:yt}),Object(x.jsx)(u.a,{exact:!0,path:"/my/dingdingGroup",component:Ct}),Object(x.jsx)(u.a,{exact:!0,path:"/my/dingdingNotice",component:Rt}),Object(x.jsx)(u.a,{exact:!0,path:"/task/history",component:qt}),Object(x.jsx)(u.a,{exact:!0,path:"/task/historyDetail",component:Bt}),Object(x.jsx)(u.a,{exact:!0,path:"/task",component:Xt}),Object(x.jsx)(u.a,{exact:!0,path:"/task/scene",component:sa})]})})})}}]),a}(n.Component);var ca=function(){return Object(x.jsx)(ra,{})},la=a(18),oa=a(279);r.a.render(Object(x.jsx)(la.a,{locale:oa.a,children:Object(x.jsx)(ca,{})}),document.getElementById("root"))}},[[498,1,2]]]);
//# sourceMappingURL=main.d73d5c78.chunk.js.map